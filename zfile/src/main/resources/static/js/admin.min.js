(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["admin"],{"04e1":function(e,t,n){},"08e2":function(e,t,n){},"0ae0":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-card",{staticClass:"zfile-admin-short-card"},[n("el-form",{staticClass:"zfile-admin-short-form",attrs:{inline:!0,model:e.searchParam}},[n("el-form-item",{attrs:{label:"直链 Key"}},[n("el-input",{attrs:{size:"small"},model:{value:e.searchParam.key,callback:function(t){e.$set(e.searchParam,"key",t)},expression:"searchParam.key"}})],1),n("el-form-item",{attrs:{label:"路径/文件名"}},[n("el-input",{attrs:{size:"small"},model:{value:e.searchParam.url,callback:function(t){e.$set(e.searchParam,"url",t)},expression:"searchParam.url"}})],1),n("el-form-item",{attrs:{label:"创建日期"}},[n("el-date-picker",{attrs:{type:"daterange",align:"right","unlink-panels":"","value-format":"yyyy-MM-dd","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":e.pickerOptions},on:{change:e.dateChange},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}})],1),n("el-form-item",[n("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-search"},on:{click:e.init}},[e._v("查询")])],1)],1),n("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-plus"},on:{click:e.openAddLinkItemDialog}},[e._v("新增直链")]),n("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-delete"},on:{click:e.batchDeleteLinkItem}},[e._v("删除所选")]),n("el-table",{ref:"shortLinkTable",attrs:{data:e.linkLog,"default-sort":{prop:"createDate",order:"descending"}},on:{"row-click":e.handleRowClick,"sort-change":e.sortMethod}},[n("el-table-column",{attrs:{type:"selection",label:"序号"}}),n("el-table-column",{attrs:{type:"index",label:"序号"}}),n("el-table-column",{attrs:{prop:"key","show-overflow-tooltip":!0,width:"100",sortable:"custom","sort-orders":["ascending","descending"],label:"Key"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("a",{attrs:{target:"_blank",href:e.siteDomain+"/s/"+t.row.key}},[e._v(e._s(t.row.key))]),n("i",{staticClass:"el-icon-edit-outline table-edit-icon",on:{click:function(n){return e.editKey(t.row.id)}}})]}}])}),n("el-table-column",{attrs:{prop:"url","show-overflow-tooltip":!0,sortable:"custom","sort-orders":["ascending","descending"],label:"路径"}}),n("el-table-column",{attrs:{prop:"createDate",width:"150",sortable:"custom","sort-orders":["ascending","descending"],label:"创建日期"}}),n("el-table-column",{attrs:{width:"120",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-popconfirm",{attrs:{confirmButtonText:"确定",cancelButtonText:"取消",icon:"el-icon-info",iconColor:"red",title:"确定删除此直链"},on:{confirm:function(n){return e.deleteLink(t.row.id)}}},[n("el-button",{staticClass:"el-icon-delete",attrs:{slot:"reference",size:"mini",type:"danger"},slot:"reference"},[e._v("删除")])],1)]}}])})],1),n("el-pagination",{attrs:{background:"","current-page":e.searchParam.page,"page-sizes":[10,50,100,200,999999],layout:"total, sizes, prev, pager, next, jumper","page-size":e.searchParam.limit,total:e.searchParam.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),e.addLinkVisible?n("el-dialog",{attrs:{id:"cacheDialog",width:"50%",title:"直链管理","modal-append-to-body":!1,visible:e.addLinkVisible},on:{"update:visible":function(t){e.addLinkVisible=t}}},[n("el-form",{attrs:{model:e.addLinkModel,"label-width":"150px"}},[n("el-form-item",{attrs:{label:"驱动器 ID"}},[n("el-select",{attrs:{placeholder:"请选择驱动器"},model:{value:e.addLinkModel.driveId,callback:function(t){e.$set(e.addLinkModel,"driveId",t)},expression:"addLinkModel.driveId"}},e._l(e.driveList,(function(t){return n("el-option",{key:t.id,attrs:{label:t.name,value:t.id}},[n("span",{staticStyle:{float:"left"}},[e._v(e._s(t.name))]),n("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[e._v(e._s(t.id))])])})),1)],1),n("el-form-item",{attrs:{label:"路径"}},[n("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入路径地址"},model:{value:e.addLinkModel.path,callback:function(t){e.$set(e.addLinkModel,"path",t)},expression:"addLinkModel.path"}},[n("div",{attrs:{slot:"prepend"},slot:"prepend"},[e._v("/directlink/"+e._s(e.addLinkModel.driveId))])])],1)],1),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary",icon:"el-icon-check",size:"small"},on:{click:e.addLinkItemAction}},[e._v("保存")]),n("el-button",{attrs:{icon:"el-icon-close",size:"small"},on:{click:function(t){e.addLinkVisible=!1}}},[e._v("关闭")])],1)],1):e._e()],1)},o=[],i={name:"ShortLink",data:function(){return{addLinkModel:{driveId:null,path:""},addLinkVisible:!1,linkUrl:"",linkLog:[],searchParam:{page:1,limit:10,total:0,url:"",key:"",orderBy:"",orderDirection:""},pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,n=new Date;n.setTime(n.getTime()-6048e5),e.$emit("pick",[n,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,n=new Date;n.setTime(n.getTime()-2592e6),e.$emit("pick",[n,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,n=new Date;n.setTime(n.getTime()-7776e6),e.$emit("pick",[n,t])}}]},date:["",""],driveList:[],siteDomain:""}},methods:{editKey:function(e){var t=this;this.$prompt("请输入要修改为的 Key。","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then((function(n){var a=n.value;t.$http.get("/admin/api/short-link/key",{params:{id:e,newKey:a}}).then((function(){t.$message({message:"修改成功",type:"success"}),t.init()}))}))},handleRowClick:function(e){this.$refs.shortLinkTable.toggleRowSelection(e)},batchDeleteLinkItem:function(){var e=this,t=this.$refs.shortLinkTable.selection;0!==t.length?this.$confirm("删除后不可恢复, 是否确认删除","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",callback:function(n){if("confirm"===n){var a=[];for(var o in t)a[o]=t[o].id;e.$http.delete("/admin/api/short-link",{params:{id:a}}).then((function(t){0===t.data.code?(e.$message.success("删除成功"),e.init()):e.$message.error(t.data.msg)}))}}}):this.$message.warning("请至少选中一行数据")},addLinkItemAction:function(){var e=this;alert(this.$store.getters.domain),this.addLinkModel.path=this.common.removeDuplicateSeparator("/"+this.addLinkModel.path),this.$http.get("/api/short-link",{params:this.addLinkModel}).then((function(){e.$message.success("添加成功"),e.init(),e.addLinkVisible=!1}))},openAddLinkItemDialog:function(){this.addLinkVisible=!0},dateChange:function(){this.date?(this.searchParam.dateFrom=this.date[0],this.searchParam.dateTo=this.date[1]):(this.searchParam.dateFrom="",this.searchParam.dateTo="")},sortMethod:function(e){var t=e.prop,n=e.order;this.searchParam.orderBy=t,this.searchParam.orderDirection="descending"===n?"desc":"asc",this.init()},handleSizeChange:function(e){this.searchParam.limit=e,this.searchParam.page=1,this.init()},handleCurrentChange:function(e){this.searchParam.page=e,this.init()},deleteLink:function(e){var t=this;this.$http.get("/admin/link/delete/".concat(e)).then((function(e){e.data.code===t.common.responseCode.SUCCESS?(t.$message.success("删除成功"),t.init()):t.$message.error(e.data.msg)}))},init:function(){var e=this;this.$http.get("/admin/link/list",{params:this.searchParam}).then((function(t){e.linkLog=t.data.data.content,e.searchParam.total=t.data.data.totalElements,e.searchParam.limit=t.data.data.size}))},loadDriveList:function(){var e=this;this.$http.get("/api/drive/list").then((function(t){e.driveList=t.data.data.driveList}))},getDomainId:function(){var e=this;this.$http.get("/admin/config").then((function(t){e.siteDomain=t.data.data.domain}))}},mounted:function(){this.init(),this.loadDriveList(),this.getDomainId()}},r=i,s=(n("a72c"),n("2877")),l=Object(s["a"])(r,a,o,!1,null,"f6484e10",null);t["default"]=l.exports},"0fdf":function(e,t,n){"use strict";n("e032")},"121e":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-card",{attrs:{shadow:"false"}},[n("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"form",attrs:{id:"siteForm","element-loading-text":"保存中...",rules:e.rules,model:e.form,"label-width":"auto","status-icon":!0}},[n("el-form-item",{staticClass:"box animate__animated animate__fadeInUp",attrs:{label:"站点名称",prop:"siteName"}},[n("el-input",{model:{value:e.form.siteName,callback:function(t){e.$set(e.form,"siteName",t)},expression:"form.siteName"}})],1),n("el-form-item",{staticClass:"box animate__animated animate__fadeInUp",attrs:{label:"站点域名",prop:"domain"}},[n("el-input",{model:{value:e.form.domain,callback:function(t){e.$set(e.form,"domain",t)},expression:"form.domain"}}),n("div",{staticClass:"zfile-word-aux zfile-margin-left-unset"},[e._v("此地址用于生成直链及本次存储下载使用，请务必保持和服务端地址一样。")])],1),n("el-form-item",{staticClass:"box animate__animated animate__fadeInUp"},[n("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.submitForm("form")}}},[e._v("保存设置")])],1)],1)],1)},o=[],i=n("4328"),r=n.n(i),s={name:"SiteSetting",data:function(){return{form:{siteName:"",domain:""},loading:!1,rules:{siteName:[{required:!0,message:"请输入站点名称",trigger:"change"}],domain:[{required:!0,type:"url",message:"请输入正确的域名，需以 http:// 或 https:// 开头",trigger:"change"}]}}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;t.loading=!0,t.$http.post("/admin/config",r.a.stringify(t.form)).then((function(e){t.loading=!1,e.data.code===t.common.responseCode.SUCCESS?t.$message({message:"保存成功",type:"success"}):t.$message({message:e.data.msg,type:"error"})}))}))}},mounted:function(){var e=this;this.$http.get("/admin/config").then((function(t){e.form=t.data.data;var n=""===e.$http.defaults.baseURL?window.location.origin:e.$http.defaults.baseURL,a=e.form.domain;n!==a&&e.$confirm("检测到服务端地址为 ".concat(n,"，当前配置站点域名为 ").concat(a,"，是否自动进行修正（不修正可能会影响下载、文件夹加密和文档预览功能）？"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",callback:function(t){"confirm"===t&&(e.form.domain=n,e.$http.post("/admin/config",r.a.stringify(e.form)).then((function(t){e.loading=!1,t.data.code===e.common.responseCode.SUCCESS?e.$message({message:"修正成功",type:"success"}):e.$message({message:t.data.msg,type:"error"})})))}})}))}},l=s,c=(n("e99a"),n("2877")),d=Object(c["a"])(l,a,o,!1,null,"506ed09e",null);t["default"]=d.exports},"2d69":function(e,t,n){"use strict";n("c609")},"3f01":function(e,t,n){"use strict";n("8c48")},"3f19":function(e,t,n){"use strict";n("c812")},4127:function(e,t,n){"use strict";var a=n("d233"),o=n("b313"),i={brackets:function(e){return e+"[]"},indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},r=Date.prototype.toISOString,s={delimiter:"&",encode:!0,encoder:a.encode,encodeValuesOnly:!1,serializeDate:function(e){return r.call(e)},skipNulls:!1,strictNullHandling:!1},l=function e(t,n,o,i,r,l,c,d,u,m,f,p){var h=t;if("function"===typeof c)h=c(n,h);else if(h instanceof Date)h=m(h);else if(null===h){if(i)return l&&!p?l(n,s.encoder):n;h=""}if("string"===typeof h||"number"===typeof h||"boolean"===typeof h||a.isBuffer(h)){if(l){var g=p?n:l(n,s.encoder);return[f(g)+"="+f(l(h,s.encoder))]}return[f(n)+"="+f(String(h))]}var v,b=[];if("undefined"===typeof h)return b;if(Array.isArray(c))v=c;else{var y=Object.keys(h);v=d?y.sort(d):y}for(var w=0;w<v.length;++w){var _=v[w];r&&null===h[_]||(b=Array.isArray(h)?b.concat(e(h[_],o(n,_),o,i,r,l,c,d,u,m,f,p)):b.concat(e(h[_],n+(u?"."+_:"["+_+"]"),o,i,r,l,c,d,u,m,f,p)))}return b};e.exports=function(e,t){var n=e,r=t?a.assign({},t):{};if(null!==r.encoder&&void 0!==r.encoder&&"function"!==typeof r.encoder)throw new TypeError("Encoder has to be a function.");var c="undefined"===typeof r.delimiter?s.delimiter:r.delimiter,d="boolean"===typeof r.strictNullHandling?r.strictNullHandling:s.strictNullHandling,u="boolean"===typeof r.skipNulls?r.skipNulls:s.skipNulls,m="boolean"===typeof r.encode?r.encode:s.encode,f="function"===typeof r.encoder?r.encoder:s.encoder,p="function"===typeof r.sort?r.sort:null,h="undefined"!==typeof r.allowDots&&r.allowDots,g="function"===typeof r.serializeDate?r.serializeDate:s.serializeDate,v="boolean"===typeof r.encodeValuesOnly?r.encodeValuesOnly:s.encodeValuesOnly;if("undefined"===typeof r.format)r.format=o["default"];else if(!Object.prototype.hasOwnProperty.call(o.formatters,r.format))throw new TypeError("Unknown format option provided.");var b,y,w=o.formatters[r.format];"function"===typeof r.filter?(y=r.filter,n=y("",n)):Array.isArray(r.filter)&&(y=r.filter,b=y);var _,C=[];if("object"!==typeof n||null===n)return"";_=r.arrayFormat in i?r.arrayFormat:"indices"in r?r.indices?"indices":"repeat":"indices";var k=i[_];b||(b=Object.keys(n)),p&&b.sort(p);for(var S=0;S<b.length;++S){var x=b[S];u&&null===n[x]||(C=C.concat(l(n[x],x,k,d,u,m?f:null,y,p,h,g,w,v)))}var I=C.join(c),D=!0===r.addQueryPrefix?"?":"";return I.length>0?D+I:""}},4328:function(e,t,n){"use strict";var a=n("4127"),o=n("9e6a"),i=n("b313");e.exports={formats:i,parse:o,stringify:a}},"4bb0":function(e,t,n){"use strict";n("e5ac")},"50b8":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:12,offset:6}},[n("h2",[e._v("在线获取 SharePoint SiteId 小工具")]),n("el-form",{ref:"form",attrs:{rules:e.rules,model:e.form}},[n("el-form-item",{staticClass:"box animate__animated animate__fadeInUp",attrs:{label:"版本"}},[n("el-radio",{attrs:{label:"Standard"},on:{change:e.changeType},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},[e._v("国际版")]),n("el-radio",{attrs:{label:"China"},on:{change:e.changeType},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},[e._v("世纪互联")])],1),n("el-form-item",{staticClass:"box animate__animated animate__fadeInUp",attrs:{label:"AccessToken",prop:"accessToken"}},[n("el-input",{attrs:{placeholder:"请输入 AccessToken"},model:{value:e.form.accessToken,callback:function(t){e.$set(e.form,"accessToken",t)},expression:"form.accessToken"}}),n("el-link",{directives:[{name:"show",rawName:"v-show",value:"Standard"===e.form.type,expression:"form.type === 'Standard'"}],attrs:{target:"_blank",icon:"el-icon-link",href:e.$http.defaults.baseURL+"/onedrive/authorize"}},[e._v("前往获取令牌 (国际版)")]),n("el-link",{directives:[{name:"show",rawName:"v-show",value:"China"===e.form.type,expression:"form.type === 'China'"}],attrs:{target:"_blank",icon:"el-icon-link",href:e.$http.defaults.baseURL+"/onedrive/china-authorize"}},[e._v("前往获取令牌 (世纪互联)")])],1),n("el-form-item",{staticClass:"box animate__animated animate__fadeInUp",attrs:{label:"SharePoint 域名",prop:"domainPrefix"}},[n("el-input",{attrs:{placeholder:"请输入 SharePoint 域名"},model:{value:e.form.domainPrefix,callback:function(t){e.$set(e.form,"domainPrefix",t)},expression:"form.domainPrefix"}},[n("template",{slot:"append"},[e._v(".sharepoint."+e._s(e.form.domainType))])],2)],1),n("el-form-item",{staticClass:"box animate__animated animate__fadeInUp",attrs:{label:"站点名称",prop:"siteName"}},[n("template",{slot:"label"},[n("span",[e._v("站点名称")]),n("span",{staticClass:"zfile-word-aux"},[e._v("（网址上域名后面的 /sites/xxx 或/teams/xxx）")])]),n("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入站点名称"},on:{input:function(t){return e.submitForm("form")}},model:{value:e.form.siteName,callback:function(t){e.$set(e.form,"siteName",t)},expression:"form.siteName"}},[n("el-select",{attrs:{slot:"prepend"},on:{input:function(t){return e.change(t)}},slot:"prepend",model:{value:e.form.siteType,callback:function(t){e.$set(e.form,"siteType",t)},expression:"form.siteType"}},[n("el-option",{attrs:{label:"/sites/",value:"/sites/"}}),n("el-option",{attrs:{label:"/teams/",value:"/teams/"}})],1)],1)],2),n("el-form-item",{staticClass:"box animate__animated animate__fadeInUp",attrs:{label:"SiteID"}},[n("el-input",{attrs:{type:"small"},model:{value:e.siteId,callback:function(t){e.siteId=t},expression:"siteId"}},[n("el-tooltip",{staticClass:"item",attrs:{slot:"append",effect:"dark",content:"复制",placement:"bottom"},slot:"append"},[n("el-button",{attrs:{type:"small",icon:"el-icon-copy-document"},on:{click:function(t){return e.copyText(e.siteId)}}})],1)],1)],1)],1)],1)],1)},o=[],i={name:"SharePointSiteId",data:function(){return{form:{type:"Standard",accessToken:"",domainPrefix:"",siteType:"/sites/",siteName:"",domainType:"com"},siteId:"",rules:{accessToken:[{required:!0,message:"AccessToken 不能为空",trigger:"change"}],domainPrefix:[{required:!0,message:"SharePoint 域名不能为空",trigger:"change"}],siteName:[{required:!0,message:"站点名称不能为空",trigger:"change"}]},loading:!1}},watch:{"form.type":function(){this.form.accessToken&&this.getDomainPrefix()},"form.accessToken":function(){this.form.accessToken&&this.getDomainPrefix()}},methods:{getDomainPrefix:function(){var e=this;this.$http.post("/sharepoint/getDomainPrefix",this.form).then((function(t){t.data.code===e.common.responseCode.SUCCESS&&(e.form.domainPrefix=t.data.data)}))},copyText:function(e){var t=this;this.$copyText(e).then((function(){t.$message.success("复制成功")}),(function(){t.$message.error("复制失败")}))},changeType:function(){"Standard"===this.form.type?this.form.domainType="com":"China"===this.form.type&&(this.form.domainType="cn")},change:function(){this.$forceUpdate()},submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return t.loading=!1,!1;t.loading=!0,t.$http.post("/sharepoint/getSiteId",t.form).then((function(e){e.data.code===t.common.responseCode.SUCCESS&&(t.siteId=e.data.data,t.$forceUpdate(),t.$message.success("自动获取 SiteId 成功")),t.loading=!1}))}))}}},r=i,s=(n("5904"),n("2877")),l=Object(s["a"])(r,a,o,!1,null,"3ac09bd8",null);t["default"]=l.exports},"578a":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"zfile-login"},[n("el-form",{ref:"loginForm",staticClass:"zfile-login-form",attrs:{model:e.loginForm,rules:e.rules,"status-icon":""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleSubmit.apply(null,arguments)}}},[n("div",{staticClass:"zfile-login-title box animate__animated animate__fadeIn"},[e._v("\n            Z-File\n            "),n("small",[e._v("Admin")])]),n("el-form-item",{staticClass:"box animate__animated animate__fadeInUp",attrs:{prop:"username"}},[n("el-input",{attrs:{type:"text","prefix-icon":"el-icon-user","auto-complete":"off",placeholder:"用户名"},model:{value:e.loginForm.username,callback:function(t){e.$set(e.loginForm,"username","string"===typeof t?t.trim():t)},expression:"loginForm.username"}})],1),n("el-form-item",{staticClass:"box animate__animated animate__fadeInUp",attrs:{prop:"password"}},[n("el-input",{attrs:{type:"password","prefix-icon":"el-icon-key","auto-complete":"off",placeholder:"密码"},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password","string"===typeof t?t.trim():t)},expression:"loginForm.password"}})],1),n("el-form-item",[n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"right"}},[n("div",{attrs:{slot:"content"},slot:"content"},[e._v("\n                    将配置文件 application.properties 中 zfile.debug 修改为 true, 访问首页即可重置 "),n("br"),e._v("\n                    点击可前往文档查看操作方式\n                ")]),n("el-link",{staticClass:"zfile-float-right",attrs:{icon:"el-icon-question",underline:!1},on:{click:e.openResetPwdDocs}},[e._v("忘记密码")])],1)],1),n("el-form-item",[n("el-button",{staticClass:"el-col-24",attrs:{type:"primary",loading:e.loading},on:{click:e.handleSubmit}},[e._v("登录\n            ")])],1)],1)],1)},o=[],i=n("4328"),r=n.n(i),s={name:"Login",data:function(){return{loading:!1,loginForm:{},rules:{username:[{required:!0,message:"账号不能为空",trigger:"blur"}],password:[{required:!0,message:"密码不能为空",trigger:"blur"}]}}},mounted:function(){var e=this;this.$http.get("/is-installed").then((function(t){var n=t.data;0===n.code&&e.$router.push("/install")})),document.title="登录 | 后台管理"},methods:{openResetPwdDocs:function(){window.open("http://docs.zhaojun.im/zfile/#/question?id=reset-pwd")},handleSubmit:function(){var e=this;this.$refs.loginForm.validate((function(t){if(!t)return!1;e.$http.post("/doLogin",r.a.stringify(e.loginForm)).then((function(t){e.$message({message:t.data.msg,type:"success",duration:1e3,onClose:function(){e.$router.push("/admin")}})}))}))}}},l=s,c=(n("3f01"),n("2877")),d=Object(c["a"])(l,a,o,!1,null,"732157c2",null);t["default"]=d.exports},5904:function(e,t,n){"use strict";n("08e2")},"615b":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-card",{attrs:{shadow:"false"}},[n("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"form",attrs:{id:"siteForm","element-loading-text":"保存中...",model:e.form,"label-width":"auto","status-icon":!0}},[n("el-form-item",{staticClass:"box animate__animated animate__fadeInUp",attrs:{label:"页面布局"}},[n("el-radio",{attrs:{label:"full"},model:{value:e.form.layout,callback:function(t){e.$set(e.form,"layout",t)},expression:"form.layout"}},[e._v("全屏")]),n("el-radio",{attrs:{label:"center"},model:{value:e.form.layout,callback:function(t){e.$set(e.form,"layout",t)},expression:"form.layout"}},[e._v("居中")])],1),n("el-form-item",{staticClass:"box animate__animated animate__fadeInUp",attrs:{label:"列表尺寸"}},[n("el-radio",{attrs:{label:"medium"},model:{value:e.form.tableSize,callback:function(t){e.$set(e.form,"tableSize",t)},expression:"form.tableSize"}},[e._v("大")]),n("el-radio",{attrs:{label:"small"},model:{value:e.form.tableSize,callback:function(t){e.$set(e.form,"tableSize",t)},expression:"form.tableSize"}},[e._v("中")]),n("el-radio",{attrs:{label:"mini"},model:{value:e.form.tableSize,callback:function(t){e.$set(e.form,"tableSize",t)},expression:"form.tableSize"}},[e._v("小")])],1),n("el-form-item",{staticClass:"box animate__animated animate__fadeInUp",attrs:{label:"显示操作按钮"}},[n("el-switch",{model:{value:e.form.showOperator,callback:function(t){e.$set(e.form,"showOperator",t)},expression:"form.showOperator"}}),n("el-tooltip",{attrs:{placement:"right"}},[n("div",{attrs:{slot:"content"},slot:"content"},[e._v("\n                        显示下载和复制按钮, 在移动端只显示下载\n                    ")]),n("i",{staticClass:"el-icon-info zfile-info-tooltip"})])],1),n("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!0===e.form.showOperator,expression:"form.showOperator === true"}],staticClass:"box animate__animated animate__fadeInUp",attrs:{label:"生成直链功能"}},[n("el-switch",{model:{value:e.form.showLinkBtn,callback:function(t){e.$set(e.form,"showLinkBtn",t)},expression:"form.showLinkBtn"}}),n("el-tooltip",{attrs:{placement:"right"}},[n("div",{attrs:{slot:"content"},slot:"content"},[e._v("\n\t\t\t\t        控制是否显示生成直链按钮\n\t\t\t        ")]),n("i",{staticClass:"el-icon-info zfile-info-tooltip"})])],1),n("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!0===e.form.showLinkBtn,expression:"form.showLinkBtn === true"}],staticClass:"box animate__animated animate__fadeInUp",attrs:{label:"是否显示短链"}},[n("el-switch",{model:{value:e.form.showShortLink,callback:function(t){e.$set(e.form,"showShortLink",t)},expression:"form.showShortLink"}}),n("el-tooltip",{attrs:{placement:"right"}},[n("div",{attrs:{slot:"content"},slot:"content"},[e._v("\n\t\t\t\t        控制是否生成直链后显示短链\n\t\t\t        ")]),n("i",{staticClass:"el-icon-info zfile-info-tooltip"})])],1),n("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!0===e.form.showLinkBtn,expression:"form.showLinkBtn === true"}],staticClass:"box animate__animated animate__fadeInUp",attrs:{label:"是否显示直链（路径）"}},[n("el-switch",{model:{value:e.form.showPathLink,callback:function(t){e.$set(e.form,"showPathLink",t)},expression:"form.showPathLink"}}),n("el-tooltip",{attrs:{placement:"right"}},[n("div",{attrs:{slot:"content"},slot:"content"},[e._v("\n\t\t\t\t        控制是否生成直链后显示直链\n\t\t\t        ")]),n("i",{staticClass:"el-icon-info zfile-info-tooltip"})])],1),n("el-form-item",{staticClass:"box animate__animated animate__fadeInUp",attrs:{label:"显示文档区"}},[n("el-switch",{model:{value:e.form.showDocument,callback:function(t){e.$set(e.form,"showDocument",t)},expression:"form.showDocument"}}),n("el-tooltip",{attrs:{placement:"right"}},[n("div",{attrs:{slot:"content"},slot:"content"},[e._v("\n                        在文件列表下，显示当前文件夹中 readme.md 的内容，支持 md 和 html 语法\n                    ")]),n("i",{staticClass:"el-icon-info zfile-info-tooltip"})])],1),n("el-form-item",{staticClass:"box animate__animated animate__fadeInUp",attrs:{label:"显示公告"}},[n("el-switch",{model:{value:e.form.showAnnouncement,callback:function(t){e.$set(e.form,"showAnnouncement",t)},expression:"form.showAnnouncement"}}),n("el-tooltip",{attrs:{placement:"right"}},[n("div",{attrs:{slot:"content"},slot:"content"},[e._v("\n                        网站顶部，显示公告内容，支持 HTML 语法\n                    ")]),n("i",{staticClass:"el-icon-info zfile-info-tooltip"})])],1),n("el-form-item",{staticClass:"box animate__animated animate__fadeInUp",attrs:{label:"公告内容"}},[n("el-input",{attrs:{type:"textarea",rows:3,placeholder:"请输入公告内容"},model:{value:e.form.announcement,callback:function(t){e.$set(e.form,"announcement",t)},expression:"form.announcement"}})],1),n("el-form-item",{staticClass:"box animate__animated animate__fadeInUp",attrs:{label:"自定义 CSS"}},[n("el-input",{attrs:{type:"textarea",rows:3,placeholder:"请输入自定义 CSS 内容"},model:{value:e.form.customCss,callback:function(t){e.$set(e.form,"customCss",t)},expression:"form.customCss"}})],1),n("el-form-item",{staticClass:"box animate__animated animate__fadeInUp",attrs:{label:"自定义 JS"}},[n("el-input",{attrs:{type:"textarea",rows:3,placeholder:"请输入自定义 JS 内容"},model:{value:e.form.customJs,callback:function(t){e.$set(e.form,"customJs",t)},expression:"form.customJs"}})],1),n("el-form-item",[n("el-button",{attrs:{type:"primary",round:""},on:{click:function(t){return e.submitForm("form")}}},[e._v("保存设置")])],1)],1)],1)},o=[],i=n("4328"),r=n.n(i),s={name:"ViewSetting",data:function(){return{form:{layout:"",tableSize:"",showOperator:!1,showLinkBtn:!1,showShortLink:!1,showPathLink:!1,showDocument:!1,showAnnouncement:!1,announcement:"",customCss:"",customJs:""},loading:!1}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;t.loading=!0,t.$http.post("/admin/config",r.a.stringify(t.form)).then((function(e){t.loading=!1,e.data.code===t.common.responseCode.SUCCESS&&t.$message({message:"保存成功",type:"success"})}))}))}},mounted:function(){var e=this;this.$http.get("/admin/config").then((function(t){e.form=t.data.data}))}},l=s,c=n("2877"),d=Object(c["a"])(l,a,o,!1,null,"8977aa00",null);t["default"]=d.exports},"7c58":function(e,t,n){},"7df7":function(e,t,n){"use strict";n("7c58")},"8c44":function(e,t,n){},"8c48":function(e,t,n){},"8d1d":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-card",[n("div",[n("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"mini"},on:{click:e.addDrive}},[e._v("新增")]),n("span",{staticClass:"zfile-word-aux"},[e._v("提示：拖拽行可以进行排序")])],1),n("el-table",{ref:"driveTable",attrs:{data:e.driveList,"row-key":"id","highlight-current-row":""}},[n("el-table-column",{attrs:{prop:"id",align:"center",width:"100",label:"驱动器ID"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.row.id))]),n("i",{staticClass:"el-icon-edit-outline table-edit-icon",on:{click:function(n){return e.editDriveId(t.row.id)}}})]}}])}),n("el-table-column",{attrs:{prop:"name","show-overflow-tooltip":!0,label:"驱动器名称"}}),n("el-table-column",{attrs:{prop:"type",formatter:e.typeFormatter,"show-overflow-tooltip":!0,width:"160",label:"所属策略"}}),n("el-table-column",{attrs:{prop:"enable",width:"100",label:"是否启用"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-switch",{on:{change:function(n){return e.switchEnableStatus(t.row)}},model:{value:t.row.enable,callback:function(n){e.$set(t.row,"enable",n)},expression:"scope.row.enable"}})]}}])}),n("el-table-column",{attrs:{prop:"enableCache",width:"100",label:"缓存开启"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-switch",{on:{change:function(n){return e.switchCacheEnableStatus(t.row)}},model:{value:t.row.enableCache,callback:function(n){e.$set(t.row,"enableCache",n)},expression:"scope.row.enableCache"}})]}}])}),n("el-table-column",{attrs:{prop:"autoRefreshCache",width:"120",label:"缓存自动刷新"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-switch",{on:{change:function(n){return e.switchAutoRefreshStatus(t.row)}},model:{value:t.row.autoRefreshCache,callback:function(n){e.$set(t.row,"autoRefreshCache",n)},expression:"scope.row.autoRefreshCache"}})]}}])}),n("el-table-column",{attrs:{label:"操作",width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[[n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"编辑",placement:"left"}},[n("el-button",{staticClass:"el-icon-edit",attrs:{size:"mini",type:"primary"},on:{click:function(n){return e.editDrive(t.row)}}})],1),n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"缓存管理",placement:"top"}},[n("el-button",{staticClass:"el-icon-s-operation",attrs:{size:"mini",disabled:!t.row.enableCache,type:"primary"},on:{click:function(n){return e.cacheManage(t.row)}}})],1),n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"文件过滤",placement:"bottom"}},[n("el-button",{staticClass:"el-icon-view",attrs:{size:"mini",type:"primary"},on:{click:function(n){return e.showFilterDialog(t.row)}}})],1),n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"删除",placement:"right"}},[n("el-button",{staticClass:"el-icon-delete",attrs:{size:"mini",type:"danger"},on:{click:function(n){return e.deleteDrive(t.row)}}})],1)]]}}])})],1),e.driveEditDialogVisible?n("el-dialog",{attrs:{width:"80%",title:"驱动器设置","before-close":e.handleClose,"modal-append-to-body":!1,visible:e.driveEditDialogVisible,top:"10vh","destroy-on-close":!0},on:{"update:visible":function(t){e.driveEditDialogVisible=t}}},[n("drive-edit",{attrs:{"drive-item":e.driveItem,close:e.closeDriveEdit,"support-strategy":e.supportStrategy}})],1):e._e(),e.filterDialogVisible?n("el-dialog",{attrs:{width:"40%",title:"过滤规则","modal-append-to-body":!1,visible:e.filterDialogVisible,top:"10vh","destroy-on-close":!0},on:{"update:visible":function(t){e.filterDialogVisible=t}}},[n("filter-pattern",{attrs:{"drive-id":e.currentCacheManageId,close:e.closeFilterDialog}})],1):e._e(),e.cacheManageVisible?n("el-dialog",{attrs:{id:"cacheDialog",width:"70%",title:"缓存管理","modal-append-to-body":!1,visible:e.cacheManageVisible,top:"10vh","destroy-on-close":!0},on:{"update:visible":function(t){e.cacheManageVisible=t}}},[n("cache-manager",{attrs:{"current-cache-manage-id":this.currentCacheManageId}})],1):e._e()],1)},o=[];
/**!
 * Sortable 1.14.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */
function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e){return s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(){return c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},c.apply(this,arguments)}function d(e,t){if(null==e)return{};var n,a,o={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}function u(e,t){if(null==e)return{};var n,a,o=d(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var m="1.14.0";function f(e){if("undefined"!==typeof window&&window.navigator)return!!navigator.userAgent.match(e)}var p=f(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),h=f(/Edge/i),g=f(/firefox/i),v=f(/safari/i)&&!f(/chrome/i)&&!f(/android/i),b=f(/iP(ad|od|hone)/i),y=f(/chrome/i)&&f(/android/i),w={capture:!1,passive:!1};function _(e,t,n){e.addEventListener(t,n,!p&&w)}function C(e,t,n){e.removeEventListener(t,n,!p&&w)}function k(e,t){if(t){if(">"===t[0]&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch(n){return!1}return!1}}function S(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function x(e,t,n,a){if(e){n=n||document;do{if(null!=t&&(">"===t[0]?e.parentNode===n&&k(e,t):k(e,t))||a&&e===n)return e;if(e===n)break}while(e=S(e))}return null}var I,D=/\s+/g;function E(e,t,n){if(e&&t)if(e.classList)e.classList[n?"add":"remove"](t);else{var a=(" "+e.className+" ").replace(D," ").replace(" "+t+" "," ");e.className=(a+(n?" "+t:"")).replace(D," ")}}function T(e,t,n){var a=e&&e.style;if(a){if(void 0===n)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(n=e.currentStyle),void 0===t?n:n[t];t in a||-1!==t.indexOf("webkit")||(t="-webkit-"+t),a[t]=n+("string"===typeof n?"":"px")}}function $(e,t){var n="";if("string"===typeof e)n=e;else do{var a=T(e,"transform");a&&"none"!==a&&(n=a+" "+n)}while(!t&&(e=e.parentNode));var o=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return o&&new o(n)}function P(e,t,n){if(e){var a=e.getElementsByTagName(t),o=0,i=a.length;if(n)for(;o<i;o++)n(a[o],o);return a}return[]}function z(){var e=document.scrollingElement;return e||document.documentElement}function O(e,t,n,a,o){if(e.getBoundingClientRect||e===window){var i,r,s,l,c,d,u;if(e!==window&&e.parentNode&&e!==z()?(i=e.getBoundingClientRect(),r=i.top,s=i.left,l=i.bottom,c=i.right,d=i.height,u=i.width):(r=0,s=0,l=window.innerHeight,c=window.innerWidth,d=window.innerHeight,u=window.innerWidth),(t||n)&&e!==window&&(o=o||e.parentNode,!p))do{if(o&&o.getBoundingClientRect&&("none"!==T(o,"transform")||n&&"static"!==T(o,"position"))){var m=o.getBoundingClientRect();r-=m.top+parseInt(T(o,"border-top-width")),s-=m.left+parseInt(T(o,"border-left-width")),l=r+i.height,c=s+i.width;break}}while(o=o.parentNode);if(a&&e!==window){var f=$(o||e),h=f&&f.a,g=f&&f.d;f&&(r/=g,s/=h,u/=h,d/=g,l=r+d,c=s+u)}return{top:r,left:s,bottom:l,right:c,width:u,height:d}}}function N(e,t,n){var a=q(e,!0),o=O(e)[t];while(a){var i=O(a)[n],r=void 0;if(r="top"===n||"left"===n?o>=i:o<=i,!r)return a;if(a===z())break;a=q(a,!1)}return!1}function L(e,t,n,a){var o=0,i=0,r=e.children;while(i<r.length){if("none"!==r[i].style.display&&r[i]!==Je.ghost&&(a||r[i]!==Je.dragged)&&x(r[i],n.draggable,e,!1)){if(o===t)return r[i];o++}i++}return null}function M(e,t){var n=e.lastElementChild;while(n&&(n===Je.ghost||"none"===T(n,"display")||t&&!k(n,t)))n=n.previousElementSibling;return n||null}function F(e,t){var n=0;if(!e||!e.parentNode)return-1;while(e=e.previousElementSibling)"TEMPLATE"===e.nodeName.toUpperCase()||e===Je.clone||t&&!k(e,t)||n++;return n}function A(e){var t=0,n=0,a=z();if(e)do{var o=$(e),i=o.a,r=o.d;t+=e.scrollLeft*i,n+=e.scrollTop*r}while(e!==a&&(e=e.parentNode));return[t,n]}function j(e,t){for(var n in e)if(e.hasOwnProperty(n))for(var a in t)if(t.hasOwnProperty(a)&&t[a]===e[n][a])return Number(n);return-1}function q(e,t){if(!e||!e.getBoundingClientRect)return z();var n=e,a=!1;do{if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var o=T(n);if(n.clientWidth<n.scrollWidth&&("auto"==o.overflowX||"scroll"==o.overflowX)||n.clientHeight<n.scrollHeight&&("auto"==o.overflowY||"scroll"==o.overflowY)){if(!n.getBoundingClientRect||n===document.body)return z();if(a||t)return n;a=!0}}}while(n=n.parentNode);return z()}function R(e,t){if(e&&t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function U(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}function B(e,t){return function(){if(!I){var n=arguments,a=this;1===n.length?e.call(a,n[0]):e.apply(a,n),I=setTimeout((function(){I=void 0}),t)}}}function X(){clearTimeout(I),I=void 0}function H(e,t,n){e.scrollLeft+=t,e.scrollTop+=n}function Y(e){var t=window.Polymer,n=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):n?n(e).clone(!0)[0]:e.cloneNode(!0)}var V="Sortable"+(new Date).getTime();function K(){var e,t=[];return{captureAnimationState:function(){if(t=[],this.options.animation){var e=[].slice.call(this.el.children);e.forEach((function(e){if("none"!==T(e,"display")&&e!==Je.ghost){t.push({target:e,rect:O(e)});var n=r({},t[t.length-1].rect);if(e.thisAnimationDuration){var a=$(e,!0);a&&(n.top-=a.f,n.left-=a.e)}e.fromRect=n}}))}},addAnimationState:function(e){t.push(e)},removeAnimationState:function(e){t.splice(j(t,{target:e}),1)},animateAll:function(n){var a=this;if(!this.options.animation)return clearTimeout(e),void("function"===typeof n&&n());var o=!1,i=0;t.forEach((function(e){var t=0,n=e.target,r=n.fromRect,s=O(n),l=n.prevFromRect,c=n.prevToRect,d=e.rect,u=$(n,!0);u&&(s.top-=u.f,s.left-=u.e),n.toRect=s,n.thisAnimationDuration&&U(l,s)&&!U(r,s)&&(d.top-s.top)/(d.left-s.left)===(r.top-s.top)/(r.left-s.left)&&(t=J(d,l,c,a.options)),U(s,r)||(n.prevFromRect=r,n.prevToRect=s,t||(t=a.options.animation),a.animate(n,d,s,t)),t&&(o=!0,i=Math.max(i,t),clearTimeout(n.animationResetTimer),n.animationResetTimer=setTimeout((function(){n.animationTime=0,n.prevFromRect=null,n.fromRect=null,n.prevToRect=null,n.thisAnimationDuration=null}),t),n.thisAnimationDuration=t)})),clearTimeout(e),o?e=setTimeout((function(){"function"===typeof n&&n()}),i):"function"===typeof n&&n(),t=[]},animate:function(e,t,n,a){if(a){T(e,"transition",""),T(e,"transform","");var o=$(this.el),i=o&&o.a,r=o&&o.d,s=(t.left-n.left)/(i||1),l=(t.top-n.top)/(r||1);e.animatingX=!!s,e.animatingY=!!l,T(e,"transform","translate3d("+s+"px,"+l+"px,0)"),this.forRepaintDummy=W(e),T(e,"transition","transform "+a+"ms"+(this.options.easing?" "+this.options.easing:"")),T(e,"transform","translate3d(0,0,0)"),"number"===typeof e.animated&&clearTimeout(e.animated),e.animated=setTimeout((function(){T(e,"transition",""),T(e,"transform",""),e.animated=!1,e.animatingX=!1,e.animatingY=!1}),a)}}}}function W(e){return e.offsetWidth}function J(e,t,n,a){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-n.top,2)+Math.pow(t.left-n.left,2))*a.animation}var Z=[],G={initializeByDefault:!0},Q={mount:function(e){for(var t in G)G.hasOwnProperty(t)&&!(t in e)&&(e[t]=G[t]);Z.forEach((function(t){if(t.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")})),Z.push(e)},pluginEvent:function(e,t,n){var a=this;this.eventCanceled=!1,n.cancel=function(){a.eventCanceled=!0};var o=e+"Global";Z.forEach((function(a){t[a.pluginName]&&(t[a.pluginName][o]&&t[a.pluginName][o](r({sortable:t},n)),t.options[a.pluginName]&&t[a.pluginName][e]&&t[a.pluginName][e](r({sortable:t},n)))}))},initializePlugins:function(e,t,n,a){for(var o in Z.forEach((function(a){var o=a.pluginName;if(e.options[o]||a.initializeByDefault){var i=new a(e,t,e.options);i.sortable=e,i.options=e.options,e[o]=i,c(n,i.defaults)}})),e.options)if(e.options.hasOwnProperty(o)){var i=this.modifyOption(e,o,e.options[o]);"undefined"!==typeof i&&(e.options[o]=i)}},getEventProperties:function(e,t){var n={};return Z.forEach((function(a){"function"===typeof a.eventProperties&&c(n,a.eventProperties.call(t[a.pluginName],e))})),n},modifyOption:function(e,t,n){var a;return Z.forEach((function(o){e[o.pluginName]&&o.optionListeners&&"function"===typeof o.optionListeners[t]&&(a=o.optionListeners[t].call(e[o.pluginName],n))})),a}};function ee(e){var t=e.sortable,n=e.rootEl,a=e.name,o=e.targetEl,i=e.cloneEl,s=e.toEl,l=e.fromEl,c=e.oldIndex,d=e.newIndex,u=e.oldDraggableIndex,m=e.newDraggableIndex,f=e.originalEvent,g=e.putSortable,v=e.extraEventProperties;if(t=t||n&&n[V],t){var b,y=t.options,w="on"+a.charAt(0).toUpperCase()+a.substr(1);!window.CustomEvent||p||h?(b=document.createEvent("Event"),b.initEvent(a,!0,!0)):b=new CustomEvent(a,{bubbles:!0,cancelable:!0}),b.to=s||n,b.from=l||n,b.item=o||n,b.clone=i,b.oldIndex=c,b.newIndex=d,b.oldDraggableIndex=u,b.newDraggableIndex=m,b.originalEvent=f,b.pullMode=g?g.lastPutMode:void 0;var _=r(r({},v),Q.getEventProperties(a,t));for(var C in _)b[C]=_[C];n&&n.dispatchEvent(b),y[w]&&y[w].call(t,b)}}var te=["evt"],ne=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.evt,o=u(n,te);Q.pluginEvent.bind(Je)(e,t,r({dragEl:oe,parentEl:ie,ghostEl:re,rootEl:se,nextEl:le,lastDownEl:ce,cloneEl:de,cloneHidden:ue,dragStarted:Se,putSortable:ve,activeSortable:Je.active,originalEvent:a,oldIndex:me,oldDraggableIndex:pe,newIndex:fe,newDraggableIndex:he,hideGhostForTarget:Ye,unhideGhostForTarget:Ve,cloneNowHidden:function(){ue=!0},cloneNowShown:function(){ue=!1},dispatchSortableEvent:function(e){ae({sortable:t,name:e,originalEvent:a})}},o))};function ae(e){ee(r({putSortable:ve,cloneEl:de,targetEl:oe,rootEl:se,oldIndex:me,oldDraggableIndex:pe,newIndex:fe,newDraggableIndex:he},e))}var oe,ie,re,se,le,ce,de,ue,me,fe,pe,he,ge,ve,be,ye,we,_e,Ce,ke,Se,xe,Ie,De,Ee,Te=!1,$e=!1,Pe=[],ze=!1,Oe=!1,Ne=[],Le=!1,Me=[],Fe="undefined"!==typeof document,Ae=b,je=h||p?"cssFloat":"float",qe=Fe&&!y&&!b&&"draggable"in document.createElement("div"),Re=function(){if(Fe){if(p)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto","auto"===e.style.pointerEvents}}(),Ue=function(e,t){var n=T(e),a=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),o=L(e,0,t),i=L(e,1,t),r=o&&T(o),s=i&&T(i),l=r&&parseInt(r.marginLeft)+parseInt(r.marginRight)+O(o).width,c=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+O(i).width;if("flex"===n.display)return"column"===n.flexDirection||"column-reverse"===n.flexDirection?"vertical":"horizontal";if("grid"===n.display)return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(o&&r["float"]&&"none"!==r["float"]){var d="left"===r["float"]?"left":"right";return!i||"both"!==s.clear&&s.clear!==d?"horizontal":"vertical"}return o&&("block"===r.display||"flex"===r.display||"table"===r.display||"grid"===r.display||l>=a&&"none"===n[je]||i&&"none"===n[je]&&l+c>a)?"vertical":"horizontal"},Be=function(e,t,n){var a=n?e.left:e.top,o=n?e.right:e.bottom,i=n?e.width:e.height,r=n?t.left:t.top,s=n?t.right:t.bottom,l=n?t.width:t.height;return a===r||o===s||a+i/2===r+l/2},Xe=function(e,t){var n;return Pe.some((function(a){var o=a[V].options.emptyInsertThreshold;if(o&&!M(a)){var i=O(a),r=e>=i.left-o&&e<=i.right+o,s=t>=i.top-o&&t<=i.bottom+o;return r&&s?n=a:void 0}})),n},He=function(e){function t(e,n){return function(a,o,i,r){var s=a.options.group.name&&o.options.group.name&&a.options.group.name===o.options.group.name;if(null==e&&(n||s))return!0;if(null==e||!1===e)return!1;if(n&&"clone"===e)return e;if("function"===typeof e)return t(e(a,o,i,r),n)(a,o,i,r);var l=(n?a:o).options.group.name;return!0===e||"string"===typeof e&&e===l||e.join&&e.indexOf(l)>-1}}var n={},a=e.group;a&&"object"==s(a)||(a={name:a}),n.name=a.name,n.checkPull=t(a.pull,!0),n.checkPut=t(a.put),n.revertClone=a.revertClone,e.group=n},Ye=function(){!Re&&re&&T(re,"display","none")},Ve=function(){!Re&&re&&T(re,"display","")};Fe&&document.addEventListener("click",(function(e){if($e)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),$e=!1,!1}),!0);var Ke=function(e){if(oe){e=e.touches?e.touches[0]:e;var t=Xe(e.clientX,e.clientY);if(t){var n={};for(var a in e)e.hasOwnProperty(a)&&(n[a]=e[a]);n.target=n.rootEl=t,n.preventDefault=void 0,n.stopPropagation=void 0,t[V]._onDragOver(n)}}},We=function(e){oe&&oe.parentNode[V]._isOutsideThisEl(e.target)};function Je(e,t){if(!e||!e.nodeType||1!==e.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=t=c({},t),e[V]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Ue(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(e,t){e.setData("Text",t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==Je.supportPointer&&"PointerEvent"in window&&!v,emptyInsertThreshold:5};for(var a in Q.initializePlugins(this,e,n),n)!(a in t)&&(t[a]=n[a]);for(var o in He(t),this)"_"===o.charAt(0)&&"function"===typeof this[o]&&(this[o]=this[o].bind(this));this.nativeDraggable=!t.forceFallback&&qe,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?_(e,"pointerdown",this._onTapStart):(_(e,"mousedown",this._onTapStart),_(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(_(e,"dragover",this),_(e,"dragenter",this)),Pe.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),c(this,K())}function Ze(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.cancelable&&e.preventDefault()}function Ge(e,t,n,a,o,i,r,s){var l,c,d=e[V],u=d.options.onMove;return!window.CustomEvent||p||h?(l=document.createEvent("Event"),l.initEvent("move",!0,!0)):l=new CustomEvent("move",{bubbles:!0,cancelable:!0}),l.to=t,l.from=e,l.dragged=n,l.draggedRect=a,l.related=o||t,l.relatedRect=i||O(t),l.willInsertAfter=s,l.originalEvent=r,e.dispatchEvent(l),u&&(c=u.call(d,l,r)),c}function Qe(e){e.draggable=!1}function et(){Le=!1}function tt(e,t,n){var a=O(L(n.el,0,n.options,!0)),o=10;return t?e.clientX<a.left-o||e.clientY<a.top&&e.clientX<a.right:e.clientY<a.top-o||e.clientY<a.bottom&&e.clientX<a.left}function nt(e,t,n){var a=O(M(n.el,n.options.draggable)),o=10;return t?e.clientX>a.right+o||e.clientX<=a.right&&e.clientY>a.bottom&&e.clientX>=a.left:e.clientX>a.right&&e.clientY>a.top||e.clientX<=a.right&&e.clientY>a.bottom+o}function at(e,t,n,a,o,i,r,s){var l=a?e.clientY:e.clientX,c=a?n.height:n.width,d=a?n.top:n.left,u=a?n.bottom:n.right,m=!1;if(!r)if(s&&De<c*o){if(!ze&&(1===Ie?l>d+c*i/2:l<u-c*i/2)&&(ze=!0),ze)m=!0;else if(1===Ie?l<d+De:l>u-De)return-Ie}else if(l>d+c*(1-o)/2&&l<u-c*(1-o)/2)return ot(t);return m=m||r,m&&(l<d+c*i/2||l>u-c*i/2)?l>d+c/2?1:-1:0}function ot(e){return F(oe)<F(e)?1:-1}function it(e){var t=e.tagName+e.className+e.src+e.href+e.textContent,n=t.length,a=0;while(n--)a+=t.charCodeAt(n);return a.toString(36)}function rt(e){Me.length=0;var t=e.getElementsByTagName("input"),n=t.length;while(n--){var a=t[n];a.checked&&Me.push(a)}}function st(e){return setTimeout(e,0)}function lt(e){return clearTimeout(e)}Je.prototype={constructor:Je,_isOutsideThisEl:function(e){this.el.contains(e)||e===this.el||(xe=null)},_getDirection:function(e,t){return"function"===typeof this.options.direction?this.options.direction.call(this,e,t,oe):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t=this,n=this.el,a=this.options,o=a.preventOnFilter,i=e.type,r=e.touches&&e.touches[0]||e.pointerType&&"touch"===e.pointerType&&e,s=(r||e).target,l=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||s,c=a.filter;if(rt(n),!oe&&!(/mousedown|pointerdown/.test(i)&&0!==e.button||a.disabled)&&!l.isContentEditable&&(this.nativeDraggable||!v||!s||"SELECT"!==s.tagName.toUpperCase())&&(s=x(s,a.draggable,n,!1),(!s||!s.animated)&&ce!==s)){if(me=F(s),pe=F(s,a.draggable),"function"===typeof c){if(c.call(this,e,s,this))return ae({sortable:t,rootEl:l,name:"filter",targetEl:s,toEl:n,fromEl:n}),ne("filter",t,{evt:e}),void(o&&e.cancelable&&e.preventDefault())}else if(c&&(c=c.split(",").some((function(a){if(a=x(l,a.trim(),n,!1),a)return ae({sortable:t,rootEl:a,name:"filter",targetEl:s,fromEl:n,toEl:n}),ne("filter",t,{evt:e}),!0})),c))return void(o&&e.cancelable&&e.preventDefault());a.handle&&!x(l,a.handle,n,!1)||this._prepareDragStart(e,r,s)}}},_prepareDragStart:function(e,t,n){var a,o=this,i=o.el,r=o.options,s=i.ownerDocument;if(n&&!oe&&n.parentNode===i){var l=O(n);if(se=i,oe=n,ie=oe.parentNode,le=oe.nextSibling,ce=n,ge=r.group,Je.dragged=oe,be={target:oe,clientX:(t||e).clientX,clientY:(t||e).clientY},Ce=be.clientX-l.left,ke=be.clientY-l.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,oe.style["will-change"]="all",a=function(){ne("delayEnded",o,{evt:e}),Je.eventCanceled?o._onDrop():(o._disableDelayedDragEvents(),!g&&o.nativeDraggable&&(oe.draggable=!0),o._triggerDragStart(e,t),ae({sortable:o,name:"choose",originalEvent:e}),E(oe,r.chosenClass,!0))},r.ignore.split(",").forEach((function(e){P(oe,e.trim(),Qe)})),_(s,"dragover",Ke),_(s,"mousemove",Ke),_(s,"touchmove",Ke),_(s,"mouseup",o._onDrop),_(s,"touchend",o._onDrop),_(s,"touchcancel",o._onDrop),g&&this.nativeDraggable&&(this.options.touchStartThreshold=4,oe.draggable=!0),ne("delayStart",this,{evt:e}),!r.delay||r.delayOnTouchOnly&&!t||this.nativeDraggable&&(h||p))a();else{if(Je.eventCanceled)return void this._onDrop();_(s,"mouseup",o._disableDelayedDrag),_(s,"touchend",o._disableDelayedDrag),_(s,"touchcancel",o._disableDelayedDrag),_(s,"mousemove",o._delayedDragTouchMoveHandler),_(s,"touchmove",o._delayedDragTouchMoveHandler),r.supportPointer&&_(s,"pointermove",o._delayedDragTouchMoveHandler),o._dragStartTimer=setTimeout(a,r.delay)}}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){oe&&Qe(oe),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;C(e,"mouseup",this._disableDelayedDrag),C(e,"touchend",this._disableDelayedDrag),C(e,"touchcancel",this._disableDelayedDrag),C(e,"mousemove",this._delayedDragTouchMoveHandler),C(e,"touchmove",this._delayedDragTouchMoveHandler),C(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||"touch"==e.pointerType&&e,!this.nativeDraggable||t?this.options.supportPointer?_(document,"pointermove",this._onTouchMove):_(document,t?"touchmove":"mousemove",this._onTouchMove):(_(oe,"dragend",this),_(se,"dragstart",this._onDragStart));try{document.selection?st((function(){document.selection.empty()})):window.getSelection().removeAllRanges()}catch(n){}},_dragStarted:function(e,t){if(Te=!1,se&&oe){ne("dragStarted",this,{evt:t}),this.nativeDraggable&&_(document,"dragover",We);var n=this.options;!e&&E(oe,n.dragClass,!1),E(oe,n.ghostClass,!0),Je.active=this,e&&this._appendGhost(),ae({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(ye){this._lastX=ye.clientX,this._lastY=ye.clientY,Ye();var e=document.elementFromPoint(ye.clientX,ye.clientY),t=e;while(e&&e.shadowRoot){if(e=e.shadowRoot.elementFromPoint(ye.clientX,ye.clientY),e===t)break;t=e}if(oe.parentNode[V]._isOutsideThisEl(e),t)do{if(t[V]){var n=void 0;if(n=t[V]._onDragOver({clientX:ye.clientX,clientY:ye.clientY,target:e,rootEl:t}),n&&!this.options.dragoverBubble)break}e=t}while(t=t.parentNode);Ve()}},_onTouchMove:function(e){if(be){var t=this.options,n=t.fallbackTolerance,a=t.fallbackOffset,o=e.touches?e.touches[0]:e,i=re&&$(re,!0),r=re&&i&&i.a,s=re&&i&&i.d,l=Ae&&Ee&&A(Ee),c=(o.clientX-be.clientX+a.x)/(r||1)+(l?l[0]-Ne[0]:0)/(r||1),d=(o.clientY-be.clientY+a.y)/(s||1)+(l?l[1]-Ne[1]:0)/(s||1);if(!Je.active&&!Te){if(n&&Math.max(Math.abs(o.clientX-this._lastX),Math.abs(o.clientY-this._lastY))<n)return;this._onDragStart(e,!0)}if(re){i?(i.e+=c-(we||0),i.f+=d-(_e||0)):i={a:1,b:0,c:0,d:1,e:c,f:d};var u="matrix(".concat(i.a,",").concat(i.b,",").concat(i.c,",").concat(i.d,",").concat(i.e,",").concat(i.f,")");T(re,"webkitTransform",u),T(re,"mozTransform",u),T(re,"msTransform",u),T(re,"transform",u),we=c,_e=d,ye=o}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!re){var e=this.options.fallbackOnBody?document.body:se,t=O(oe,!0,Ae,!0,e),n=this.options;if(Ae){Ee=e;while("static"===T(Ee,"position")&&"none"===T(Ee,"transform")&&Ee!==document)Ee=Ee.parentNode;Ee!==document.body&&Ee!==document.documentElement?(Ee===document&&(Ee=z()),t.top+=Ee.scrollTop,t.left+=Ee.scrollLeft):Ee=z(),Ne=A(Ee)}re=oe.cloneNode(!0),E(re,n.ghostClass,!1),E(re,n.fallbackClass,!0),E(re,n.dragClass,!0),T(re,"transition",""),T(re,"transform",""),T(re,"box-sizing","border-box"),T(re,"margin",0),T(re,"top",t.top),T(re,"left",t.left),T(re,"width",t.width),T(re,"height",t.height),T(re,"opacity","0.8"),T(re,"position",Ae?"absolute":"fixed"),T(re,"zIndex","100000"),T(re,"pointerEvents","none"),Je.ghost=re,e.appendChild(re),T(re,"transform-origin",Ce/parseInt(re.style.width)*100+"% "+ke/parseInt(re.style.height)*100+"%")}},_onDragStart:function(e,t){var n=this,a=e.dataTransfer,o=n.options;ne("dragStart",this,{evt:e}),Je.eventCanceled?this._onDrop():(ne("setupClone",this),Je.eventCanceled||(de=Y(oe),de.draggable=!1,de.style["will-change"]="",this._hideClone(),E(de,this.options.chosenClass,!1),Je.clone=de),n.cloneId=st((function(){ne("clone",n),Je.eventCanceled||(n.options.removeCloneOnHide||se.insertBefore(de,oe),n._hideClone(),ae({sortable:n,name:"clone"}))})),!t&&E(oe,o.dragClass,!0),t?($e=!0,n._loopId=setInterval(n._emulateDragOver,50)):(C(document,"mouseup",n._onDrop),C(document,"touchend",n._onDrop),C(document,"touchcancel",n._onDrop),a&&(a.effectAllowed="move",o.setData&&o.setData.call(n,a,oe)),_(document,"drop",n),T(oe,"transform","translateZ(0)")),Te=!0,n._dragStartId=st(n._dragStarted.bind(n,t,e)),_(document,"selectstart",n),Se=!0,v&&T(document.body,"user-select","none"))},_onDragOver:function(e){var t,n,a,o,i=this.el,s=e.target,l=this.options,c=l.group,d=Je.active,u=ge===c,m=l.sort,f=ve||d,p=this,h=!1;if(!Le){if(void 0!==e.preventDefault&&e.cancelable&&e.preventDefault(),s=x(s,l.draggable,i,!0),A("dragOver"),Je.eventCanceled)return h;if(oe.contains(e.target)||s.animated&&s.animatingX&&s.animatingY||p._ignoreWhileAnimating===s)return q(!1);if($e=!1,d&&!l.disabled&&(u?m||(a=ie!==se):ve===this||(this.lastPutMode=ge.checkPull(this,d,oe,e))&&c.checkPut(this,d,oe,e))){if(o="vertical"===this._getDirection(e,s),t=O(oe),A("dragOverValid"),Je.eventCanceled)return h;if(a)return ie=se,j(),this._hideClone(),A("revert"),Je.eventCanceled||(le?se.insertBefore(oe,le):se.appendChild(oe)),q(!0);var g=M(i,l.draggable);if(!g||nt(e,o,this)&&!g.animated){if(g===oe)return q(!1);if(g&&i===e.target&&(s=g),s&&(n=O(s)),!1!==Ge(se,i,oe,t,s,n,e,!!s))return j(),i.appendChild(oe),ie=i,R(),q(!0)}else if(g&&tt(e,o,this)){var v=L(i,0,l,!0);if(v===oe)return q(!1);if(s=v,n=O(s),!1!==Ge(se,i,oe,t,s,n,e,!1))return j(),i.insertBefore(oe,v),ie=i,R(),q(!0)}else if(s.parentNode===i){n=O(s);var b,y,w=0,_=oe.parentNode!==i,C=!Be(oe.animated&&oe.toRect||t,s.animated&&s.toRect||n,o),k=o?"top":"left",S=N(s,"top","top")||N(oe,"top","top"),I=S?S.scrollTop:void 0;if(xe!==s&&(b=n[k],ze=!1,Oe=!C&&l.invertSwap||_),w=at(e,s,n,o,C?1:l.swapThreshold,null==l.invertedSwapThreshold?l.swapThreshold:l.invertedSwapThreshold,Oe,xe===s),0!==w){var D=F(oe);do{D-=w,y=ie.children[D]}while(y&&("none"===T(y,"display")||y===re))}if(0===w||y===s)return q(!1);xe=s,Ie=w;var $=s.nextElementSibling,P=!1;P=1===w;var z=Ge(se,i,oe,t,s,n,e,P);if(!1!==z)return 1!==z&&-1!==z||(P=1===z),Le=!0,setTimeout(et,30),j(),P&&!$?i.appendChild(oe):s.parentNode.insertBefore(oe,P?$:s),S&&H(S,0,I-S.scrollTop),ie=oe.parentNode,void 0===b||Oe||(De=Math.abs(b-O(s)[k])),R(),q(!0)}if(i.contains(oe))return q(!1)}return!1}function A(l,c){ne(l,p,r({evt:e,isOwner:u,axis:o?"vertical":"horizontal",revert:a,dragRect:t,targetRect:n,canSort:m,fromSortable:f,target:s,completed:q,onMove:function(n,a){return Ge(se,i,oe,t,n,O(n),e,a)},changed:R},c))}function j(){A("dragOverAnimationCapture"),p.captureAnimationState(),p!==f&&f.captureAnimationState()}function q(t){return A("dragOverCompleted",{insertion:t}),t&&(u?d._hideClone():d._showClone(p),p!==f&&(E(oe,ve?ve.options.ghostClass:d.options.ghostClass,!1),E(oe,l.ghostClass,!0)),ve!==p&&p!==Je.active?ve=p:p===Je.active&&ve&&(ve=null),f===p&&(p._ignoreWhileAnimating=s),p.animateAll((function(){A("dragOverAnimationComplete"),p._ignoreWhileAnimating=null})),p!==f&&(f.animateAll(),f._ignoreWhileAnimating=null)),(s===oe&&!oe.animated||s===i&&!s.animated)&&(xe=null),l.dragoverBubble||e.rootEl||s===document||(oe.parentNode[V]._isOutsideThisEl(e.target),!t&&Ke(e)),!l.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),h=!0}function R(){fe=F(oe),he=F(oe,l.draggable),ae({sortable:p,name:"change",toEl:i,newIndex:fe,newDraggableIndex:he,originalEvent:e})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){C(document,"mousemove",this._onTouchMove),C(document,"touchmove",this._onTouchMove),C(document,"pointermove",this._onTouchMove),C(document,"dragover",Ke),C(document,"mousemove",Ke),C(document,"touchmove",Ke)},_offUpEvents:function(){var e=this.el.ownerDocument;C(e,"mouseup",this._onDrop),C(e,"touchend",this._onDrop),C(e,"pointerup",this._onDrop),C(e,"touchcancel",this._onDrop),C(document,"selectstart",this)},_onDrop:function(e){var t=this.el,n=this.options;fe=F(oe),he=F(oe,n.draggable),ne("drop",this,{evt:e}),ie=oe&&oe.parentNode,fe=F(oe),he=F(oe,n.draggable),Je.eventCanceled||(Te=!1,Oe=!1,ze=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),lt(this.cloneId),lt(this._dragStartId),this.nativeDraggable&&(C(document,"drop",this),C(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),v&&T(document.body,"user-select",""),T(oe,"transform",""),e&&(Se&&(e.cancelable&&e.preventDefault(),!n.dropBubble&&e.stopPropagation()),re&&re.parentNode&&re.parentNode.removeChild(re),(se===ie||ve&&"clone"!==ve.lastPutMode)&&de&&de.parentNode&&de.parentNode.removeChild(de),oe&&(this.nativeDraggable&&C(oe,"dragend",this),Qe(oe),oe.style["will-change"]="",Se&&!Te&&E(oe,ve?ve.options.ghostClass:this.options.ghostClass,!1),E(oe,this.options.chosenClass,!1),ae({sortable:this,name:"unchoose",toEl:ie,newIndex:null,newDraggableIndex:null,originalEvent:e}),se!==ie?(fe>=0&&(ae({rootEl:ie,name:"add",toEl:ie,fromEl:se,originalEvent:e}),ae({sortable:this,name:"remove",toEl:ie,originalEvent:e}),ae({rootEl:ie,name:"sort",toEl:ie,fromEl:se,originalEvent:e}),ae({sortable:this,name:"sort",toEl:ie,originalEvent:e})),ve&&ve.save()):fe!==me&&fe>=0&&(ae({sortable:this,name:"update",toEl:ie,originalEvent:e}),ae({sortable:this,name:"sort",toEl:ie,originalEvent:e})),Je.active&&(null!=fe&&-1!==fe||(fe=me,he=pe),ae({sortable:this,name:"end",toEl:ie,originalEvent:e}),this.save())))),this._nulling()},_nulling:function(){ne("nulling",this),se=oe=ie=re=le=de=ce=ue=be=ye=Se=fe=he=me=pe=xe=Ie=ve=ge=Je.dragged=Je.ghost=Je.clone=Je.active=null,Me.forEach((function(e){e.checked=!0})),Me.length=we=_e=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":oe&&(this._onDragOver(e),Ze(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e,t=[],n=this.el.children,a=0,o=n.length,i=this.options;a<o;a++)e=n[a],x(e,i.draggable,this.el,!1)&&t.push(e.getAttribute(i.dataIdAttr)||it(e));return t},sort:function(e,t){var n={},a=this.el;this.toArray().forEach((function(e,t){var o=a.children[t];x(o,this.options.draggable,a,!1)&&(n[e]=o)}),this),t&&this.captureAnimationState(),e.forEach((function(e){n[e]&&(a.removeChild(n[e]),a.appendChild(n[e]))})),t&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return x(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var n=this.options;if(void 0===t)return n[e];var a=Q.modifyOption(this,e,t);n[e]="undefined"!==typeof a?a:t,"group"===e&&He(n)},destroy:function(){ne("destroy",this);var e=this.el;e[V]=null,C(e,"mousedown",this._onTapStart),C(e,"touchstart",this._onTapStart),C(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(C(e,"dragover",this),C(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),(function(e){e.removeAttribute("draggable")})),this._onDrop(),this._disableDelayedDragEvents(),Pe.splice(Pe.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!ue){if(ne("hideClone",this),Je.eventCanceled)return;T(de,"display","none"),this.options.removeCloneOnHide&&de.parentNode&&de.parentNode.removeChild(de),ue=!0}},_showClone:function(e){if("clone"===e.lastPutMode){if(ue){if(ne("showClone",this),Je.eventCanceled)return;oe.parentNode!=se||this.options.group.revertClone?le?se.insertBefore(de,le):se.appendChild(de):se.insertBefore(de,oe),this.options.group.revertClone&&this.animate(oe,de),T(de,"display",""),ue=!1}}else this._hideClone()}},Fe&&_(document,"touchmove",(function(e){(Je.active||Te)&&e.cancelable&&e.preventDefault()})),Je.utils={on:_,off:C,css:T,find:P,is:function(e,t){return!!x(e,t,e,!1)},extend:R,throttle:B,closest:x,toggleClass:E,clone:Y,index:F,nextTick:st,cancelNextTick:lt,detectDirection:Ue,getChild:L},Je.get=function(e){return e[V]},Je.mount=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t[0].constructor===Array&&(t=t[0]),t.forEach((function(e){if(!e.prototype||!e.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(e));e.utils&&(Je.utils=r(r({},Je.utils),e.utils)),Q.mount(e)}))},Je.create=function(e,t){return new Je(e,t)},Je.version=m;var ct,dt,ut,mt,ft,pt,ht=[],gt=!1;function vt(){function e(){for(var e in this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)"_"===e.charAt(0)&&"function"===typeof this[e]&&(this[e]=this[e].bind(this))}return e.prototype={dragStarted:function(e){var t=e.originalEvent;this.sortable.nativeDraggable?_(document,"dragover",this._handleAutoScroll):this.options.supportPointer?_(document,"pointermove",this._handleFallbackAutoScroll):t.touches?_(document,"touchmove",this._handleFallbackAutoScroll):_(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(e){var t=e.originalEvent;this.options.dragOverBubble||t.rootEl||this._handleAutoScroll(t)},drop:function(){this.sortable.nativeDraggable?C(document,"dragover",this._handleAutoScroll):(C(document,"pointermove",this._handleFallbackAutoScroll),C(document,"touchmove",this._handleFallbackAutoScroll),C(document,"mousemove",this._handleFallbackAutoScroll)),yt(),bt(),X()},nulling:function(){ft=dt=ct=gt=pt=ut=mt=null,ht.length=0},_handleFallbackAutoScroll:function(e){this._handleAutoScroll(e,!0)},_handleAutoScroll:function(e,t){var n=this,a=(e.touches?e.touches[0]:e).clientX,o=(e.touches?e.touches[0]:e).clientY,i=document.elementFromPoint(a,o);if(ft=e,t||this.options.forceAutoScrollFallback||h||p||v){wt(e,this.options,i,t);var r=q(i,!0);!gt||pt&&a===ut&&o===mt||(pt&&yt(),pt=setInterval((function(){var i=q(document.elementFromPoint(a,o),!0);i!==r&&(r=i,bt()),wt(e,n.options,i,t)}),10),ut=a,mt=o)}else{if(!this.options.bubbleScroll||q(i,!0)===z())return void bt();wt(e,this.options,q(i,!1),!1)}}},c(e,{pluginName:"scroll",initializeByDefault:!0})}function bt(){ht.forEach((function(e){clearInterval(e.pid)})),ht=[]}function yt(){clearInterval(pt)}var wt=B((function(e,t,n,a){if(t.scroll){var o,i=(e.touches?e.touches[0]:e).clientX,r=(e.touches?e.touches[0]:e).clientY,s=t.scrollSensitivity,l=t.scrollSpeed,c=z(),d=!1;dt!==n&&(dt=n,bt(),ct=t.scroll,o=t.scrollFn,!0===ct&&(ct=q(n,!0)));var u=0,m=ct;do{var f=m,p=O(f),h=p.top,g=p.bottom,v=p.left,b=p.right,y=p.width,w=p.height,_=void 0,C=void 0,k=f.scrollWidth,S=f.scrollHeight,x=T(f),I=f.scrollLeft,D=f.scrollTop;f===c?(_=y<k&&("auto"===x.overflowX||"scroll"===x.overflowX||"visible"===x.overflowX),C=w<S&&("auto"===x.overflowY||"scroll"===x.overflowY||"visible"===x.overflowY)):(_=y<k&&("auto"===x.overflowX||"scroll"===x.overflowX),C=w<S&&("auto"===x.overflowY||"scroll"===x.overflowY));var E=_&&(Math.abs(b-i)<=s&&I+y<k)-(Math.abs(v-i)<=s&&!!I),$=C&&(Math.abs(g-r)<=s&&D+w<S)-(Math.abs(h-r)<=s&&!!D);if(!ht[u])for(var P=0;P<=u;P++)ht[P]||(ht[P]={});ht[u].vx==E&&ht[u].vy==$&&ht[u].el===f||(ht[u].el=f,ht[u].vx=E,ht[u].vy=$,clearInterval(ht[u].pid),0==E&&0==$||(d=!0,ht[u].pid=setInterval(function(){a&&0===this.layer&&Je.active._onTouchMove(ft);var t=ht[this.layer].vy?ht[this.layer].vy*l:0,n=ht[this.layer].vx?ht[this.layer].vx*l:0;"function"===typeof o&&"continue"!==o.call(Je.dragged.parentNode[V],n,t,e,ft,ht[this.layer].el)||H(ht[this.layer].el,n,t)}.bind({layer:u}),24))),u++}while(t.bubbleScroll&&m!==c&&(m=q(m,!1)));gt=d}}),30),_t=function(e){var t=e.originalEvent,n=e.putSortable,a=e.dragEl,o=e.activeSortable,i=e.dispatchSortableEvent,r=e.hideGhostForTarget,s=e.unhideGhostForTarget;if(t){var l=n||o;r();var c=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,d=document.elementFromPoint(c.clientX,c.clientY);s(),l&&!l.el.contains(d)&&(i("spill"),this.onSpill({dragEl:a,putSortable:n}))}};function Ct(){}function kt(){}Ct.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,n=e.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var a=L(this.sortable.el,this.startIndex,this.options);a?this.sortable.el.insertBefore(t,a):this.sortable.el.appendChild(t),this.sortable.animateAll(),n&&n.animateAll()},drop:_t},c(Ct,{pluginName:"revertOnSpill"}),kt.prototype={onSpill:function(e){var t=e.dragEl,n=e.putSortable,a=n||this.sortable;a.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),a.animateAll()},drop:_t},c(kt,{pluginName:"removeOnSpill"});Je.mount(new vt),Je.mount(kt,Ct);var St=Je,xt=n("4328"),It=n.n(xt),Dt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.supportStrategy?n("div",[n("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"form",attrs:{"element-loading-text":"保存并初始化中.",id:"siteForm",model:e.driveItem,rules:e.rules,"label-width":"auto","status-icon":!0}},[n("el-row",{staticClass:"box animate__animated animate__fadeIn",attrs:{gutter:50}},[n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"驱动器名称",prop:"name"}},[n("el-input",{model:{value:e.driveItem.name,callback:function(t){e.$set(e.driveItem,"name",t)},expression:"driveItem.name"}})],1),n("el-form-item",{attrs:{label:"是否启用"}},[n("el-switch",{model:{value:e.driveItem.enable,callback:function(t){e.$set(e.driveItem,"enable",t)},expression:"driveItem.enable"}}),n("el-tooltip",{attrs:{placement:"right"}},[n("div",{attrs:{slot:"content"},slot:"content"},[e._v("\n                                如不启用，则不在首页展示。\n                            ")]),n("i",{staticClass:"el-icon-info zfile-info-tooltip"})])],1),n("el-form-item",{attrs:{label:"是否默认打开图片模式"}},[n("el-switch",{model:{value:e.driveItem.defaultSwitchToImgMode,callback:function(t){e.$set(e.driveItem,"defaultSwitchToImgMode",t)},expression:"driveItem.defaultSwitchToImgMode"}}),n("el-tooltip",{attrs:{placement:"right"}},[n("div",{attrs:{slot:"content"},slot:"content"},[e._v("\n                                启用后，每次切换到此存储器，是否默认打开图片模式\n                            ")]),n("i",{staticClass:"el-icon-info zfile-info-tooltip"})])],1),n("el-form-item",{attrs:{label:"开启缓存"}},[n("el-switch",{on:{change:e.cacheChange},model:{value:e.driveItem.enableCache,callback:function(t){e.$set(e.driveItem,"enableCache",t)},expression:"driveItem.enableCache"}}),n("el-tooltip",{attrs:{placement:"right"}},[n("div",{attrs:{slot:"content"},slot:"content"},[e._v("\n                                开启缓存后，N 秒内重复请求相同文件夹，不会重复调用 API。\n                                "),n("br"),e._v("\n                                参数 N 在配置文件中设置 {zfile.cache.timeout}，默认为 1800 秒。\n                                "),n("br"),n("br"),e._v("\n                                注意：开启缓存后，可能会导致系统不稳定，如非必要或不了解缓存的，不建议开启此功能。\n                            ")]),n("i",{staticClass:"el-icon-info zfile-info-tooltip"})])],1),n("el-form-item",{attrs:{label:"开启缓存自动刷新"}},[n("el-switch",{model:{value:e.driveItem.autoRefreshCache,callback:function(t){e.$set(e.driveItem,"autoRefreshCache",t)},expression:"driveItem.autoRefreshCache"}}),n("el-tooltip",{attrs:{placement:"right"}},[n("div",{attrs:{slot:"content"},slot:"content"},[e._v("\n                                每隔 N 秒检测到期的缓存, 对于过期缓存尝试调用 API, 重新写入缓存.\n                                "),n("br"),e._v("\n                                参数 N 在配置文件中设置 {zfile.cache.auto-refresh-interval}，默认为 5 秒。\n                            ")]),n("i",{staticClass:"el-icon-info zfile-info-tooltip"})])],1),n("el-form-item",{attrs:{label:"存储策略",prop:"type"}},[n("el-select",{attrs:{filterable:"",placeholder:"请选择存储策略"},model:{value:e.driveItem.type,callback:function(t){e.$set(e.driveItem,"type",t)},expression:"driveItem.type"}},e._l(e.supportStrategy,(function(e){return n("el-option",{key:e.key,attrs:{label:e.description,value:e.key}})})),1)],1)],1),n("el-col",{attrs:{span:12}},[e._l(e.storageStrategyForm,(function(t){return"siteType"!==t.key?n("el-form-item",{key:t.title,attrs:{label:t.title,prop:"storageStrategyConfig."+t.key}},[n("el-col",{staticClass:"el-drive-form-col",attrs:{span:22}},["endPoint"===t.key&&e.region.hasOwnProperty(e.driveItem.type)?n("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"","allow-create":"","default-first-option":""},model:{value:e.driveItem.storageStrategyConfig.endPoint,callback:function(t){e.$set(e.driveItem.storageStrategyConfig,"endPoint",t)},expression:"driveItem.storageStrategyConfig.endPoint"}},e._l(e.region[e.driveItem.type],(function(t){return n("el-option",{key:t.name,attrs:{label:t.name,value:t.val}},[n("span",{staticStyle:{float:"left"}},[e._v(e._s(t.name))]),n("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[e._v(e._s(t.val))])])})),1):"pathStyle"===t.key?n("div",[n("el-select",{model:{value:e.driveItem.storageStrategyConfig.pathStyle,callback:function(t){e.$set(e.driveItem.storageStrategyConfig,"pathStyle",t)},expression:"driveItem.storageStrategyConfig.pathStyle"}},[n("el-option",{attrs:{label:"bucket-virtual-hosting",value:"bucket-virtual-hosting"}}),n("el-option",{attrs:{label:"path-style",value:"path-style"}})],1),n("el-link",{staticClass:"zfile-word-aux",attrs:{target:"_blank",icon:"el-icon-document",href:"https://docs.aws.amazon.com/zh_cn/AmazonS3/latest/dev/VirtualHosting.html#path-style-access"}},[e._v("查看 S3 API 说明文档")])],1):"isPrivate"===t.key?n("div",[n("el-switch",{model:{value:e.driveItem.storageStrategyConfig.isPrivate,callback:function(t){e.$set(e.driveItem.storageStrategyConfig,"isPrivate",t)},expression:"driveItem.storageStrategyConfig.isPrivate"}}),n("el-tooltip",{attrs:{placement:"right"}},[n("div",{attrs:{slot:"content"},slot:"content"},[e._v("\n                                        私有空间会生成带签名的下载链接\n                                    ")]),n("i",{staticClass:"el-icon-question zfile-info-tooltip"})])],1):"siteName"!==t.key||"sharepoint"!==e.driveItem.type&&"sharepoint-china"!==e.driveItem.type?n("el-input",{attrs:{placeholder:""},on:{input:function(t){return e.change(t)}},model:{value:e.driveItem.storageStrategyConfig[t.key],callback:function(n){e.$set(e.driveItem.storageStrategyConfig,t.key,n)},expression:"driveItem.storageStrategyConfig[item.key]"}}):n("div",[n("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入站点名称"},model:{value:e.driveItem.storageStrategyConfig.siteName,callback:function(t){e.$set(e.driveItem.storageStrategyConfig,"siteName",t)},expression:"driveItem.storageStrategyConfig.siteName"}},[n("el-select",{staticClass:"zfile-site-id-input-site-type-select",attrs:{slot:"prepend"},on:{input:function(t){return e.change(t)}},slot:"prepend",model:{value:e.driveItem.storageStrategyConfig.siteType,callback:function(t){e.$set(e.driveItem.storageStrategyConfig,"siteType",t)},expression:"driveItem.storageStrategyConfig.siteType"}},[n("el-option",{attrs:{label:"/sites/",value:"/sites/"}}),n("el-option",{attrs:{label:"/teams/",value:"/teams/"}})],1)],1)],1)],1),"endPoint"===t.key?n("div",[n("el-tooltip",{attrs:{placement:"bottom"}},[n("div",{attrs:{slot:"content"},slot:"content"},[e._v("\n\t\t\t\t                    如下拉列表中没有的区域, 或想使用内网地址, 可直接输入后回车, 如 oss-cn-beijing-internal.aliyuncs.com\n\t\t\t                    ")]),n("i",{staticClass:"el-icon-question zfile-info-tooltip"})])],1):e._e(),"basePath"===t.key?n("div",[n("el-tooltip",{attrs:{placement:"bottom"}},[n("div",{attrs:{slot:"content"},slot:"content"},[e._v("\n                                    基路径表示仅读取的文件夹, 不填写表示允许读取所有。如： '/', '/文件夹1'\n                                ")]),n("i",{staticClass:"el-icon-question zfile-info-tooltip"})])],1):e._e(),"filePath"===t.key?n("div",[n("el-tooltip",{attrs:{placement:"bottom"}},[n("div",{attrs:{slot:"content"},slot:"content"},[e._v("\n                                    Linux 或对象存储等需以 / 开头.\n                                    "),n("br"),e._v("\n                                    Windows 支持 C:/ 类的盘符开头.\n                                    "),n("br"),e._v("\n                                    结尾不需要加 "),n("b",[e._v("/")]),e._v(".\n\t                                "),n("br"),n("br"),e._v("\n\t                                Docker 部署需提前映射宿主机路径！\n\t                                "),n("span",{staticStyle:{cursor:"pointer",color:"#4d9ff8"},attrs:{slot:"content"},on:{click:function(t){return e.openUrl("https://docs.docker.com/engine/reference/run/#volume-shared-filesystems")}},slot:"content"},[e._v("\n\t\t                                (配置文档)\n\t                                ")])]),n("i",{staticClass:"el-icon-question zfile-info-tooltip"})])],1):e._e(),"proxyDomain"===t.key?n("div",[n("el-tooltip",{attrs:{placement:"bottom"}},[n("div",{staticStyle:{cursor:"pointer"},attrs:{slot:"content"},on:{click:function(t){return e.openUrl("http://docs.zhaojun.im/zfile/#/advanced?id=onedrive-cf")}},slot:"content"},[e._v("\n\t\t\t\t                    配置&使用文档（点击进入）\n\t\t\t                    ")]),n("i",{staticClass:"el-icon-question zfile-info-tooltip"})])],1):e._e(),"domain"===t.key&&"ftp"===e.driveItem.type?n("div",[n("el-tooltip",{attrs:{placement:"bottom"}},[n("div",{attrs:{slot:"content"},slot:"content"},[e._v("\n                                    如次 ftp 目录同时也有 http 访问权限，则这里填写 http 访问域名，这样就会用 http 协议下载。防止 ftp 协议导致的密码泄露\n                                ")]),n("i",{staticClass:"el-icon-question zfile-info-tooltip"})])],1):e._e(),"siteName"!==t.key||"sharepoint"!==e.driveItem.type&&"sharepoint-china"!==e.driveItem.type?e._e():n("div",[n("el-tooltip",{attrs:{placement:"bottom"}},[n("div",{attrs:{slot:"content"},slot:"content"},[e._v("\n                                    /sites/xxx 或 /teams/xxx ，xxx 为你的站点名称\n                                ")]),n("i",{staticClass:"el-icon-question zfile-info-tooltip"})])],1),"siteId"!==t.key||"sharepoint"!==e.driveItem.type&&"sharepoint-china"!==e.driveItem.type?e._e():n("div",[n("el-tooltip",{attrs:{placement:"bottom"}},[n("div",{attrs:{slot:"content"},slot:"content"},[e._v('\n                                    输入 "访问令牌" 和 "站点名称" 后，可以自动获取 SiteId。\n                                    '),n("br"),e._v('\n                                    如无法自动获取，请点击下方的 "前往获取 Site Id"。\n                                ')]),n("i",{staticClass:"el-icon-question zfile-info-tooltip"})])],1)],1):e._e()})),"onedrive"===e.driveItem.type||"sharepoint"===e.driveItem.type?n("el-form-item",[n("el-link",{attrs:{target:"_blank",icon:"el-icon-link",href:e.$http.defaults.baseURL+"/onedrive/authorize"}},[e._v("前往获取令牌")]),n("br"),n("el-link",{directives:[{name:"show",rawName:"v-show",value:"sharepoint"===e.driveItem.type,expression:"driveItem.type === 'sharepoint'"}],attrs:{target:"_blank",icon:"el-icon-link",href:"/#/sharepoint-util"}},[e._v("前往获取 Site Id")])],1):e._e(),"onedrive-china"===e.driveItem.type||"sharepoint-china"===e.driveItem.type?n("el-form-item",[n("el-link",{attrs:{target:"_blank",icon:"el-icon-link",href:e.$http.defaults.baseURL+"/onedrive/china-authorize"}},[e._v("前往获取令牌")]),n("br"),n("el-link",{directives:[{name:"show",rawName:"v-show",value:"sharepoint-china"===e.driveItem.type,expression:"driveItem.type === 'sharepoint-china'"}],attrs:{target:"_blank",icon:"el-icon-link",href:"/#/sharepoint-util"}},[e._v("前往获取 Site Id")])],1):e._e(),"ftp"===e.driveItem.type?n("el-form-item",[n("div",{staticClass:"zfile-word-aux zfile-margin-left-unset"},[e._v("\n                            注意: FTP 协议，如果不填写加速域名 (HTTP 下载地址)，则会使用 FTP 协议进行下载\n                            "),n("br"),e._v("\n                            FTP 协议会在 URL 中暴露用户名密码，如："),n("b",[e._v("ftp://用户名:密码@IP:端口/文件路径/文件名")]),n("br"),e._v("\n                            如为 FTP 提供了加速域名 (HTTP 下载地址)，则会使用 HTTP 协议，如："),n("b",[e._v("http(s)://加速域名/文件路径/文件名")])])]):e._e()],2)],1)],1),n("div",{staticClass:"zfile-text-align-center",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary",disabled:e.loading},on:{click:function(t){return e.submitForm("form")}}},[e._v("保 存")]),n("el-button",{on:{click:e.close}},[e._v("取 消")])],1)],1):e._e()},Et=[],Tt={aliyun:[{name:"华东 1（杭州）",val:"oss-cn-hangzhou.aliyuncs.com"},{name:"华东 2（上海）",val:"oss-cn-shanghai.aliyuncs.com"},{name:"华北 1（青岛）",val:"oss-cn-qingdao.aliyuncs.com"},{name:"华北 2（北京）",val:"oss-cn-beijing.aliyuncs.com"},{name:"华北 3（张家口）",val:"oss-cn-zhangjiakou.aliyuncs.com"},{name:"华北 5（呼和浩特）",val:"oss-cn-huhehaote.aliyuncs.com"},{name:"华北 6（乌兰察布）",val:"oss-cn-wulanchabu.aliyuncs.com"},{name:"华南 1（深圳）",val:"oss-cn-shenzhen.aliyuncs.com"},{name:"华南 2（河源）",val:"oss-cn-heyuan.aliyuncs.com"},{name:"华南 3（广州）",val:"oss-cn-guangzhou.aliyuncs.com"},{name:"西南 1（成都）",val:"oss-cn-chengdu.aliyuncs.com"},{name:"中国（香港）",val:"oss-cn-hongkong.aliyuncs.com"},{name:"新加坡",val:"oss-ap-southeast-1.aliyuncs.com"},{name:"日本（东京）",val:"oss-ap-northeast-1.aliyuncs.com"},{name:"美国西部 1 （硅谷）",val:"oss-us-west-1.aliyuncs.com"},{name:"美国东部 1 （弗吉尼亚）",val:"oss-us-east-1.aliyuncs.com"},{name:"亚太东南 1 （新加坡）",val:"oss-ap-southeast-1.aliyuncs.com"},{name:"亚太东南 2 （悉尼）",val:"oss-ap-southeast-2.aliyuncs.com"},{name:"亚太东南 3 （吉隆坡）",val:"oss-ap-southeast-3.aliyuncs.com"},{name:"亚太东南 5 （雅加达）",val:"oss-ap-southeast-5.aliyuncs.com"},{name:"亚太东北 1 （日本）",val:"oss-ap-northeast-1.aliyuncs.com"},{name:"亚太南部 1 （孟买）",val:"oss-ap-south-1.aliyuncs.com"},{name:"欧洲中部 1 （法兰克福）",val:"oss-eu-central-1.aliyuncs.com"},{name:"英国（伦敦）",val:"oss-eu-west-1.aliyuncs.com"},{name:"中东东部 1 （迪拜）",val:"oss-me-east-1.aliyuncs.com"}],tencent:[{name:"北京一区",val:"cos.ap-beijing-1.myqcloud.com"},{name:"北京",val:"cos.ap-beijing.myqcloud.com"},{name:"上海",val:"cos.ap-shanghai.myqcloud.com"},{name:"广州",val:"cos.ap-guangzhou.myqcloud.com"},{name:"成都",val:"cos.ap-chengdu.myqcloud.com"},{name:"重庆",val:"cos.ap-chongqing.myqcloud.com"},{name:"深圳金融",val:"cos.ap-shenzhen-fsi.myqcloud.com"},{name:"上海金融",val:"cos.ap-shanghai-fsi.myqcloud.com"},{name:"北京金融",val:"cos.ap-beijing-fsi.myqcloud.com"},{name:"中国香港",val:"cos.ap-hongkong.myqcloud.com"},{name:"新加坡",val:"cos.ap-singapore.myqcloud.com"},{name:"孟买",val:"cos.ap-mumbai.myqcloud.com"},{name:"雅达加",val:"cos.ap-jakarta.myqcloud.com"},{name:"首尔",val:"cos.ap-seoul.myqcloud.com"},{name:"曼谷",val:"cos.ap-bangkok.myqcloud.com"},{name:"东京",val:"cos.ap-tokyo.myqcloud.com"},{name:"硅谷（美西）",val:"cos.na-siliconvalley.myqcloud.com"},{name:"弗吉尼亚（美东）",val:"cos.na-ashburn.myqcloud.com"},{name:"多伦多",val:"cos.na-toronto.myqcloud.com"},{name:"法兰克福",val:"cos.eu-frankfurt.myqcloud.com"},{name:"莫斯科",val:"cos.eu-moscow"}],huawei:[{name:"非洲-约翰内斯堡",val:"obs.af-south-1.myhuaweicloud.com"},{name:"华北-北京四",val:"obs.cn-north-4.myhuaweicloud.com"},{name:"华北-北京一",val:"obs.cn-north-1.myhuaweicloud.com"},{name:"华东-上海二",val:"obs.cn-east-2.myhuaweicloud.com"},{name:"华东-上海一",val:"obs.cn-east-3.myhuaweicloud.com"},{name:"华南-广州",val:"obs.cn-south-1.myhuaweicloud.com"},{name:"西南-贵阳一",val:"obs.cn-southwest-2.myhuaweicloud.com"},{name:"亚太-曼谷",val:"obs.ap-southeast-2.myhuaweicloud.com"},{name:"中国-香港",val:"obs.ap-southeast-1.myhuaweicloud.com"},{name:"亚太-新加坡",val:"obs.ap-southeast-3.myhuaweicloud.com"}],qiniu:[{name:"华东",val:"s3-cn-east-1.qiniucs.com"},{name:"华北",val:"s3-cn-north-1.qiniucs.com"},{name:"华南",val:"s3-cn-south-1.qiniucs.com"},{name:"北美",val:"s3-us-north-1.qiniucs.com"},{name:"东南亚",val:"s3-ap-southeast-1.qiniucs.com"},{name:"华东-浙江2",val:"s3-cn-east-2.qiniucs.com"}]},$t=Tt,Pt={name:"DriveEdit",props:{close:{type:Function},driveItem:{orderNum:null,name:"",type:null,searchEnable:!1,searchIgnoreCase:!1,searchContainEncryptedFile:!1,enableCache:!1,autoRefreshCache:!1,storageStrategyConfig:{endPoint:"",pathStyle:"",isPrivate:!1,accessKey:null,secretKey:null,bucketName:null,host:null,port:null,filePath:null,accessToken:null,refreshToken:null,secretId:null,username:null,password:null,basePath:"",domain:"",siteType:"/sites/",siteId:"",proxyDomain:""}},supportStrategy:null},watch:{"driveItem.type":function(e){e?this.loadStrategyForm(e):this.storageStrategyForm=null},"driveItem.storageStrategyConfig.siteName":function(){var e=this;if(this.driveItem.storageStrategyConfig.siteName&&this.driveItem.storageStrategyConfig.accessToken){var t={type:"sharepoint"===this.driveItem.type?"Standard":"China",accessToken:this.driveItem.storageStrategyConfig.accessToken,siteType:this.driveItem.storageStrategyConfig.siteType,siteName:this.driveItem.storageStrategyConfig.siteName};this.$http.post("/sharepoint/getSiteId",t).then((function(t){t.data.code===e.common.responseCode.SUCCESS&&(e.driveItem.storageStrategyConfig.siteId=t.data.data,e.$forceUpdate(),e.$message.success("自动获取 SiteId 成功"))}))}}},data:function(){var e=this;return{region:$t,loading:!1,storageStrategyForm:[],rules:{"storageStrategyConfig.proxyDomain":[{required:!1,type:"url",message:"请输入正确的域名，需以 http:// 或 https:// 开头",trigger:"change"}],name:[{required:!0,message:"请输入驱动器名称",trigger:"change"}],siteName:[{required:!0,message:"请输入站点名称",trigger:"change"}],username:[{required:!0,message:"请输入管理员账号",trigger:"change"}],password:[{required:!0,message:"请输入管理员密码",trigger:"change"}],domain:[{required:!0,type:"url",message:"请输入正确的域名，需以 http:// 或 https:// 开头",trigger:"change"}],type:[{required:!0,message:"存储策略不能为空",trigger:"change"}],"storageStrategyConfig.domain":[{required:!1,validator:function(t,n,a){var o=/(http|https):\/\/([\w.]+\/?)\S*/;void 0!==n&&""!==n||"ftp"!==e.driveItem.type?void 0!==n&&""!==n?o.test(n)?n.lastIndexOf("/")===n.length-1?a(new Error("请输入正确的域名，不能以 / 结尾")):a():a(new Error("请输入正确的域名，需以 http:// 或 https:// 开头")):a(new Error("域名不能为空")):a()},type:"url",trigger:"change"}],"storageStrategyConfig.username":[{validator:function(t,n,a){"upyun"!==e.driveItem.type&&"ufile"!==e.driveItem.type||void 0!==n&&""!==n?a():a(new Error("操作员名称不能为空"))}}],"storageStrategyConfig.password":[{validator:function(t,n,a){"upyun"!==e.driveItem.type&&"ufile"!==e.driveItem.type||void 0!==n&&""!==n?a():a(new Error("操作员密码不能为空"))}}],"storageStrategyConfig.endPoint":[{required:!0,message:"区域不能为空"}],"storageStrategyConfig.accessKey":[{required:!0,message:"AccessKey 不能为空"}],"storageStrategyConfig.filePath":[{required:!0,message:"文件路径不能为空"}],"storageStrategyConfig.secretKey":[{required:!0,message:"SecretKey 不能为空"}],"storageStrategyConfig.bucketName":[{required:!0,message:"此项不能为空"}],"storageStrategyConfig.host":[{required:!0,message:"域名或 IP 不能为空"}],"storageStrategyConfig.port":[{required:!0,message:"端口不能为空"}],"storageStrategyConfig.accessToken":[{required:!0,message:"访问令牌不能为空"}],"storageStrategyConfig.refreshToken":[{required:!0,message:"刷新令牌不能为空"}],"storageStrategyConfig.secretId":[{required:!0,message:"SecretId 不能为空"}],"storageStrategyConfig.siteId":[{required:!0,message:"SiteId 不能为空"}]}}},methods:{openUrl:function(e){window.open(e)},cacheChange:function(e){e||(this.driveItem.autoRefreshCache=!1)},loadStrategyForm:function(e){var t=this;this.$http.get("/admin/strategy-form",{params:{storageType:e}}).then((function(n){t.storageStrategyForm=n.data.data,"sharepoint"!==e&&"sharepoint-china"!==e||(t.driveItem.storageStrategyConfig.siteType="/sites/"),"ftp"!==e&&(t.rules["storageStrategyConfig.domain"][0].required=!0)}))},change:function(){this.$forceUpdate()},submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;t.loading=!0,t.$http.post("/admin/drive",t.driveItem).then((function(e){var n=e.data;t.$message({message:n.msg,type:0===n.code?"success":"error",duration:1500}),t.close(),t.loading=!1})).catch((function(){t.loading=!1}))}))}},mounted:function(){this.driveItem.type&&this.loadStrategyForm(this.driveItem.type)}},zt=Pt,Ot=(n("3f19"),n("2877")),Nt=Object(Ot["a"])(zt,Dt,Et,!1,null,"3a30d939",null),Lt=Nt.exports,Mt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-row",{staticClass:"zfile-cache-statistics",attrs:{gutter:20}},[n("el-col",{attrs:{span:8}},[n("el-card",{attrs:{shadow:"always"}},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("span",{staticClass:"card-title"},[e._v("缓存数")]),n("el-button",{staticClass:"zfile-float-right",attrs:{size:"mini",icon:"el-icon-delete",round:"",type:"danger"},on:{click:e.clearCache}},[e._v("清理缓存")])],1),n("div",{staticClass:"card-content",domProps:{textContent:e._s(e.driveCacheInfo.cacheCount)}})])],1),n("el-col",{attrs:{span:8}},[n("el-card",{attrs:{shadow:"always"}},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("span",{staticClass:"card-title"},[e._v("命中数")])]),n("div",{staticClass:"card-content",domProps:{textContent:e._s(e.driveCacheInfo.hitCount)}})])],1),n("el-col",{attrs:{span:8}},[n("el-card",{attrs:{shadow:"always"}},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("span",{staticClass:"card-title"},[e._v("未命中数")])]),n("div",{staticClass:"card-content",domProps:{textContent:e._s(e.driveCacheInfo.missCount)}})])],1)],1),n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:20}},[n("el-input",{attrs:{placeholder:"输入关键字搜索"},model:{value:e.cacheSearch,callback:function(t){e.cacheSearch=t},expression:"cacheSearch"}})],1),n("el-col",{attrs:{span:4}},[n("el-button",{staticClass:"zfile-float-right",attrs:{size:"small",type:"primary",icon:"el-icon-refresh"},on:{click:e.refreshCacheManageData}},[e._v("刷新统计信息")])],1)],1),n("el-table",{staticClass:"zfile-cache-table",attrs:{height:"50vh",data:e.driveCacheInfo.cacheKeys.filter((function(t){return!e.cacheSearch||t.name.toLowerCase().includes(e.cacheSearch.toLowerCase())}))}},[n("el-table-column",{attrs:{prop:"name",label:"缓存 Key (文件夹名称)","min-width":"75%"}}),n("el-table-column",{attrs:{"min-width":"25%",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{size:"mini",type:"primary",round:""},on:{click:function(n){return e.refreshCache(t.row)}}},[e._v("刷新缓存")])]}}])})],1)],1)},Ft=[],At=(n("55dd"),n("7f7f"),{name:"CacheManager",props:{currentCacheManageId:null},data:function(){return{cacheSearch:"",driveCacheInfo:{cacheCount:0,hitCount:0,missCount:0,cacheKeys:[]}}},methods:{refreshCache:function(e){var t=this;this.$http.post("/admin/cache/".concat(this.currentCacheManageId,"/refresh"),It.a.stringify({key:e.name})).then((function(){t.$message({message:"刷新成功",type:"success"})}))},refreshCacheManageData:function(){this.loadCacheManageData(),this.$message({message:"刷新成功",type:"success"})},loadCacheManageData:function(){var e=this;this.$http.get("/admin/cache/".concat(this.currentCacheManageId,"/info")).then((function(t){var n=t.data.data,a=n.cacheKeys;a.sort((function(e,t){return e.length-t.length}));for(var o=[],i=0;i<a.length;i++)o[i]={name:a[i]};n.cacheKeys=o,e.driveCacheInfo=n}))},clearCache:function(){var e=this;this.$http.post("/admin/cache/".concat(this.currentCacheManageId,"/clear")).then((function(){e.loadCacheManageData(),e.$message({message:"清理成功",type:"success"})}))}},beforeMount:function(){this.loadCacheManageData()}}),jt=At,qt=(n("0fdf"),Object(Ot["a"])(jt,Mt,Ft,!1,null,"4d6f6841",null)),Rt=qt.exports,Ut=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-form",{ref:"filterForm",attrs:{id:"filterForm",model:e.filterForm,"label-width":"120px"}},[e._l(e.filterForm.filterList,(function(t,a){return n("div",{key:a},[n("el-row",[n("el-col",{attrs:{span:20}},[n("el-form-item",{attrs:{prop:"filterList."+a+".expression",rules:{required:!0,message:"此项不能为空",trigger:"blur"},label:"表达式 "+(a+1)}},[n("el-input",{attrs:{size:"small"},model:{value:t.expression,callback:function(n){e.$set(t,"expression",n)},expression:"item.expression"}})],1)],1),n("el-col",{attrs:{span:4}},[n("el-button",{staticClass:"zfile-filter-delete-btn",attrs:{type:"danger",size:"small",icon:"el-icon-delete"},on:{click:function(t){return e.deleteFilterItem(a)}}},[e._v("删除\n                    ")])],1)],1)],1)})),n("el-form-item",[n("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},on:{click:e.addFilterItem}},[e._v("添加更多")])],1),n("el-form-item",[n("span",{staticClass:"zfile-word-aux zfile-margin-left-unset"},[e._v("\n                    表达式规则:\n                    "),n("br"),e._v("\n                    *: 单级路径通配符，如表达式 /*.jpg，可以匹配根路径下所有的 jpg 后缀的文件\n                    "),n("br"),e._v("\n                    **: 多级路径通配符，如表达式 **.jpg，可以匹配所有路径下的 jpg 后缀的文件\n                    "),n("br"),e._v("\n                    注意："),n("b",[e._v("/a.png")]),e._v(" 表示根路径下的 a.png。 "),n("b",[e._v("/a/b/c.png")]),e._v("，表示 /a/b/ 路径下的 c.png。 "),n("b",[e._v("a.png")]),e._v("，什么都不表示，因为未标注路径。\n                ")])])],2),n("div",{staticClass:"zfile-filter-save-btn",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-check"},on:{click:e.saveFilterForm}},[e._v("保存")])],1)],1)},Bt=[],Xt={name:"FilterPattern",props:{close:{type:Function},driveId:null},data:function(){return{filterForm:{filterList:[]}}},methods:{loadFilterData:function(){var e=this;this.$http.get("/admin/drive/".concat(this.driveId,"/filters")).then((function(t){e.filterForm.filterList=t.data.data}))},addFilterItem:function(){this.filterForm.filterList.push({expression:"",driveId:this.driveId})},deleteFilterItem:function(e){this.filterForm.filterList.splice(e,1)},saveFilterForm:function(){var e=this;this.$http.post("/admin/drive/".concat(this.driveId,"/filters"),this.filterForm.filterList).then((function(){e.$message({message:"保存成功",type:"success"}),e.close()}))}},mounted:function(){this.loadFilterData()}},Ht=Xt,Yt=(n("4bb0"),Object(Ot["a"])(Ht,Ut,Bt,!1,null,"20b2942a",null)),Vt=Yt.exports,Kt={name:"DriveList",components:{FilterPattern:Vt,CacheManager:Rt,DriveEdit:Lt},data:function(){return{loading:!1,driveList:[],supportStrategy:[],driveItem:{orderNum:null,name:"",type:null,enable:!0,defaultSwitchToImgMode:!1,searchEnable:!1,searchIgnoreCase:!1,searchContainEncryptedFile:!1,enableCache:!1,autoRefreshCache:!1,storageStrategyConfig:{endPoint:"",pathStyle:"",isPrivate:!1,accessKey:null,secretKey:null,bucketName:null,host:null,port:null,filePath:null,accessToken:null,refreshToken:null,secretId:null,username:null,password:null,basePath:"",domain:""}},sortable:null,driveEditDialogVisible:!1,filterDialogVisible:!1,cacheManageVisible:!1,currentCacheManageId:null}},methods:{handleClose:function(e){this.$confirm("是否确认关闭？关闭后填写的数据不会保留。",{type:"warning"}).then((function(t){e()})).catch((function(e){}))},editDriveId:function(e){var t=this;this.$prompt("请输入要修改为的 ID，需为大于零的整数。","提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^[1-9]\d{0,9}$/,inputErrorMessage:"ID 只能为大于零的整数，最大支持 9 位数字。"}).then((function(n){var a=n.value;t.$http.post("/admin/drive/updateId",It.a.stringify({updateId:e,newId:a})).then((function(){t.$message({message:"修改成功",type:"success"}),t.init()}))}))},setSort:function(){var e=this,t=document.querySelector(".el-table__body-wrapper tbody");St.create(t,{onEnd:function(t){if(t.oldIndex!==t.newIndex){var n=e.driveList.splice(t.oldIndex,1)[0];e.driveList.splice(t.newIndex,0,n),e.$http.post("/admin/drive/drag",e.driveList).then((function(){e.$message({message:"调整排序成功",type:"success"})}))}}})},clearCache:function(){var e=this;this.$http.post("/admin/cache/".concat(this.currentCacheManageId,"/clear")).then((function(){e.loadCacheManageData(),e.$message({message:"清理成功",type:"success"})}))},cacheManage:function(e){this.currentCacheManageId=e.id,this.cacheManageVisible=!0},showFilterDialog:function(e){this.currentCacheManageId=e.id,this.filterDialogVisible=!0},switchEnableStatus:function(e){var t=this,n=e.enable?"enable":"disable";this.$http.post("/admin/drive/"+e.id+"/"+n).then((function(){t.$message.success("修改成功")}))},switchCacheEnableStatus:function(e){var t=this,n=e.enableCache?"enable":"disable";this.$http.post("/admin/cache/"+e.id+"/"+n).then((function(){t.$message.success("修改成功")}))},switchAutoRefreshStatus:function(e){var t=this,n=e.autoRefreshCache?"start":"stop";this.$http.post("/admin/cache/"+e.id+"/auto-refresh/"+n).then((function(){t.$message.success("修改成功")}))},typeFormatter:function(e,t,n){for(var a in this.supportStrategy)if(this.supportStrategy[a].key===n)return this.supportStrategy[a].description},editDrive:function(e){var t=this;this.$http.get("/admin/drive/"+e.id).then((function(e){var n=e.data.data;n.type=n.type.key,t.driveItem=n,t.driveEditDialogVisible=!0}))},deleteDrive:function(e){var t=this;this.$confirm("是否确认删除？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",callback:function(n){"confirm"===n&&t.$http.delete("/admin/drive/"+e.id).then((function(e){e.data.code===t.common.responseCode.SUCCESS?(t.$message.success("删除成功"),t.init()):t.$message.success("删除失败")}))}})},closeDriveEdit:function(){this.driveEditDialogVisible=!1,this.init()},closeFilterDialog:function(){this.filterDialogVisible=!1},addDrive:function(){Object.assign(this.driveItem,this.$options.data().driveItem),this.driveItem.id=null,this.driveEditDialogVisible=!0,console.log(this.supportStrategy)},init:function(){var e=this;this.$http.get("/admin/support-strategy").then((function(t){e.supportStrategy=t.data.data})),this.$http.get("/admin/drives").then((function(t){var n=t.data.data;for(var a in n)n[a].type=n[a].type.key;e.driveList=t.data.data}))}},mounted:function(){this.init(),this.setSort()}},Wt=Kt,Jt=(n("7df7"),Object(Ot["a"])(Wt,a,o,!1,null,"32b498fc",null));t["default"]=Jt.exports},"95db":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-card",{attrs:{shadow:"false"}},[n("markdown-render",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"scroll",attrs:{"element-loading-text":"拼命加载中",text:e.md}})],1)},o=[],i=n("f786"),r={name:"API",components:{MarkdownRender:i["a"]},data:function(){return{loading:!0,md:""}},mounted:function(){var e=this,t="https://c.jun6.net/ZFILE/ZFILE API.md";this.$http.get(t,{withCredentials:!1}).then((function(t){e.loading=!1,e.md=t.data})).catch((function(){e.$http.get("/common/content",{params:{url:t}}).then((function(t){e.loading=!1,e.md=t.data.data}))}))}},s=r,l=(n("2d69"),n("2877")),c=Object(l["a"])(s,a,o,!1,null,"12b3dceb",null);t["default"]=c.exports},"9e6a":function(e,t,n){"use strict";var a=n("d233"),o=Object.prototype.hasOwnProperty,i={allowDots:!1,allowPrototypes:!1,arrayLimit:20,decoder:a.decode,delimiter:"&",depth:5,parameterLimit:1e3,plainObjects:!1,strictNullHandling:!1},r=function(e,t){for(var n={},a=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,r=t.parameterLimit===1/0?void 0:t.parameterLimit,s=a.split(t.delimiter,r),l=0;l<s.length;++l){var c,d,u=s[l],m=u.indexOf("]="),f=-1===m?u.indexOf("="):m+1;-1===f?(c=t.decoder(u,i.decoder),d=t.strictNullHandling?null:""):(c=t.decoder(u.slice(0,f),i.decoder),d=t.decoder(u.slice(f+1),i.decoder)),o.call(n,c)?n[c]=[].concat(n[c]).concat(d):n[c]=d}return n},s=function(e,t,n){for(var a=t,o=e.length-1;o>=0;--o){var i,r=e[o];if("[]"===r)i=[],i=i.concat(a);else{i=n.plainObjects?Object.create(null):{};var s="["===r.charAt(0)&&"]"===r.charAt(r.length-1)?r.slice(1,-1):r,l=parseInt(s,10);!isNaN(l)&&r!==s&&String(l)===s&&l>=0&&n.parseArrays&&l<=n.arrayLimit?(i=[],i[l]=a):i[s]=a}a=i}return a},l=function(e,t,n){if(e){var a=n.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,i=/(\[[^[\]]*])/,r=/(\[[^[\]]*])/g,l=i.exec(a),c=l?a.slice(0,l.index):a,d=[];if(c){if(!n.plainObjects&&o.call(Object.prototype,c)&&!n.allowPrototypes)return;d.push(c)}var u=0;while(null!==(l=r.exec(a))&&u<n.depth){if(u+=1,!n.plainObjects&&o.call(Object.prototype,l[1].slice(1,-1))&&!n.allowPrototypes)return;d.push(l[1])}return l&&d.push("["+a.slice(l.index)+"]"),s(d,t,n)}};e.exports=function(e,t){var n=t?a.assign({},t):{};if(null!==n.decoder&&void 0!==n.decoder&&"function"!==typeof n.decoder)throw new TypeError("Decoder has to be a function.");if(n.ignoreQueryPrefix=!0===n.ignoreQueryPrefix,n.delimiter="string"===typeof n.delimiter||a.isRegExp(n.delimiter)?n.delimiter:i.delimiter,n.depth="number"===typeof n.depth?n.depth:i.depth,n.arrayLimit="number"===typeof n.arrayLimit?n.arrayLimit:i.arrayLimit,n.parseArrays=!1!==n.parseArrays,n.decoder="function"===typeof n.decoder?n.decoder:i.decoder,n.allowDots="boolean"===typeof n.allowDots?n.allowDots:i.allowDots,n.plainObjects="boolean"===typeof n.plainObjects?n.plainObjects:i.plainObjects,n.allowPrototypes="boolean"===typeof n.allowPrototypes?n.allowPrototypes:i.allowPrototypes,n.parameterLimit="number"===typeof n.parameterLimit?n.parameterLimit:i.parameterLimit,n.strictNullHandling="boolean"===typeof n.strictNullHandling?n.strictNullHandling:i.strictNullHandling,""===e||null===e||"undefined"===typeof e)return n.plainObjects?Object.create(null):{};for(var o="string"===typeof e?r(e,n):e,s=n.plainObjects?Object.create(null):{},c=Object.keys(o),d=0;d<c.length;++d){var u=c[d],m=l(u,o[u],n);s=a.merge(s,m,n)}return a.compact(s)}},a72c:function(e,t,n){"use strict";n("04e1")},adf4:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"zfile-admin-index"},[n("div",{staticClass:"zfile-admin-top"},[n("div",{staticClass:"zfile-admin-top-content"},[n("div",{staticClass:"zfile-admin-top-logo box animate__animated animate__fadeInLeft"},[n("el-popover",{attrs:{placement:"top-start",width:"200",trigger:"hover"}},[e.latestInfo?n("div",{staticClass:"zfile-admin-index-version-info"},[n("div",{domProps:{innerHTML:e._s("最新版：v"+e.latestInfo.tag_name)}}),n("div",{domProps:{innerHTML:e._s("发布时间: "+e.common.dateFormat(e.latestInfo.published_at))}}),n("br"),e._v("\n\n                        文档地址："),n("el-link",{staticClass:"zfile-word-aux zfile-margin-left-unset",attrs:{href:"http://docs.zhaojun.im/zfile",target:"_blank"}},[e._v("点击进入")]),n("br"),e._v("\n                        后端源码地址："),n("el-link",{staticClass:"zfile-word-aux zfile-margin-left-unset",attrs:{href:"https://github.com/zhaojun1998/zfile",target:"_blank"}},[e._v("点击进入")]),n("br"),e._v("\n                        前端源码地址："),n("el-link",{staticClass:"zfile-word-aux zfile-margin-left-unset",attrs:{href:"https://github.com/zhaojun1998/zfile-vue",target:"_blank"}},[e._v("点击进入")])],1):e._e(),n("div",{attrs:{slot:"reference"},domProps:{innerHTML:e._s("ZFile Admin v"+e.common.version)},on:{click:e.openZFileAdmin},slot:"reference"})])],1),n("el-menu",{staticClass:"zfile-admin-menu box animate__animated animate__fadeInDown",attrs:{mode:"horizontal","background-color":"#001529","text-color":"hsla(0,0%,100%,.65)","active-text-color":"#fff","default-active":"/admin"!==this.$route.path?this.$route.path:"/admin/site",router:!0},on:{select:e.rebuildTitle}},[n("el-menu-item",{attrs:{index:"/admin/site"}},[n("i",{staticClass:"el-icon-setting"}),n("span",{attrs:{slot:"title",id:"/admin/site"},slot:"title"},[e._v("基本设置")])]),n("el-menu-item",{attrs:{index:"/admin/drive-list"}},[n("i",{staticClass:"el-icon-folder-opened"}),n("span",{attrs:{slot:"title",id:"/admin/drive-list"},slot:"title"},[e._v("驱动器列表")])]),n("el-menu-item",{attrs:{index:"/admin/view"}},[n("i",{staticClass:"el-icon-view"}),n("span",{attrs:{slot:"title",id:"/admin/view"},slot:"title"},[e._v("显示设置")])]),n("el-menu-item",{attrs:{index:"/admin/password"}},[n("i",{staticClass:"el-icon-key"}),n("span",{attrs:{slot:"title",id:"/admin/password"},slot:"title"},[e._v("修改密码")])]),n("el-menu-item",{attrs:{index:"/admin/short-link"}},[n("i",{staticClass:"el-icon-link"}),n("span",{attrs:{slot:"title",id:"/admin/short-link"},slot:"title"},[e._v("短链管理")])]),n("el-menu-item",{on:{click:e.logDownload}},[n("i",{staticClass:"el-icon-download"}),n("span",{attrs:{slot:"title"},slot:"title"},[e._v("日志下载")])]),n("el-menu-item",{on:{click:e.click}},[n("i",{staticClass:"el-icon-s-home"}),n("span",{attrs:{slot:"title"},slot:"title"},[e._v("前往首页")])]),n("el-menu-item",{on:{click:e.logout}},[n("i",{staticClass:"el-icon-switch-button"}),n("span",{attrs:{slot:"title"},slot:"title"},[e._v("注销")])])],1)],1)]),n("div",{staticClass:"zfile-admin-content"},[n("keep-alive",{attrs:{exclude:"CacheManager,SiteSetting"}},[n("router-view",{staticClass:"zfile-admin-content-view box animate__animated animate__fadeIn"})],1)],1)])},o=[],i={name:"Index",data:function(){return{latestInfo:{},active:"/admin/site"}},methods:{logout:function(){var e=this;this.$http.get("/logout").then((function(){e.$router.push("/login")}))},rebuildTitle:function(e){document.title=document.getElementById(e).innerText+" | 后台管理"},logDownload:function(){window.open(this.$http.defaults.baseURL+"/admin/log","_blank")},click:function(){window.open("/","_blank")},openZFileAdmin:function(){window.open("https://github.com/zhaojun1998/zfile")}},mounted:function(){var e=this,t=document.getElementsByClassName("is-active")[0].getElementsByTagName("span")[0].id;this.rebuildTitle(t),this.$http.get("https://api.github.com/repos/zhaojun1998/zfile/releases/latest",{withCredentials:!1,showMessage:!1}).then((function(t){e.latestInfo=t.data}))}},r=i,s=(n("b1fb"),n("2877")),l=Object(s["a"])(r,a,o,!1,null,"77a86734",null);t["default"]=l.exports},b1fb:function(e,t,n){"use strict";n("8c44")},b313:function(e,t,n){"use strict";var a=String.prototype.replace,o=/%20/g;e.exports={default:"RFC3986",formatters:{RFC1738:function(e){return a.call(e,o,"+")},RFC3986:function(e){return e}},RFC1738:"RFC1738",RFC3986:"RFC3986"}},b8a6:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-card",{attrs:{shadow:"false"}},[n("el-form",{ref:"form",attrs:{id:"pwdForm",rules:e.rules,model:e.form,"label-width":"auto","status-icon":!0},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submitForm("form")}}},[n("el-form-item",{staticClass:"box animate__animated animate__fadeInUp",attrs:{label:"管理员账号",prop:"username"}},[n("el-input",{model:{value:e.form.username,callback:function(t){e.$set(e.form,"username","string"===typeof t?t.trim():t)},expression:"form.username"}})],1),n("el-form-item",{staticClass:"box animate__animated animate__fadeInUp",attrs:{label:"设置新密码",prop:"password"}},[n("el-input",{model:{value:e.form.password,callback:function(t){e.$set(e.form,"password","string"===typeof t?t.trim():t)},expression:"form.password"}})],1),n("el-form-item",{staticClass:"box animate__animated animate__fadeInUp",attrs:{label:"确认密码",prop:"repassword"}},[n("el-input",{model:{value:e.form.repassword,callback:function(t){e.$set(e.form,"repassword","string"===typeof t?t.trim():t)},expression:"form.repassword"}})],1),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("form")}}},[e._v("确认")])],1)],1)],1)},o=[],i=n("4328"),r=n.n(i),s={name:"UpdatePassword",data:function(){var e=this;return{form:{username:"",password:"",repassword:""},rules:{username:[{required:!0,message:"请输入管理员账号",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],repassword:[{required:!0,validator:function(t,n,a){""===n?a(new Error("请再次输入密码")):n!==e.form.password?a(new Error("两次输入密码不一致!")):a()},trigger:"change"}]}}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;t.$http.post("/admin/update-pwd",r.a.stringify(t.form)).then((function(e){e.data.code===t.common.responseCode.SUCCESS&&t.$message({message:"保存成功",type:"success"})}))}))}},mounted:function(){var e=this;this.$http.get("/admin/config").then((function(t){e.form=t.data.data}))}},l=s,c=n("2877"),d=Object(c["a"])(l,a,o,!1,null,"3069a178",null);t["default"]=d.exports},b96d:function(e,t,n){},c609:function(e,t,n){},c812:function(e,t,n){},d233:function(e,t,n){"use strict";var a=Object.prototype.hasOwnProperty,o=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),i=function(e){var t;while(e.length){var n=e.pop();if(t=n.obj[n.prop],Array.isArray(t)){for(var a=[],o=0;o<t.length;++o)"undefined"!==typeof t[o]&&a.push(t[o]);n.obj[n.prop]=a}}return t},r=function(e,t){for(var n=t&&t.plainObjects?Object.create(null):{},a=0;a<e.length;++a)"undefined"!==typeof e[a]&&(n[a]=e[a]);return n},s=function e(t,n,o){if(!n)return t;if("object"!==typeof n){if(Array.isArray(t))t.push(n);else{if("object"!==typeof t)return[t,n];(o.plainObjects||o.allowPrototypes||!a.call(Object.prototype,n))&&(t[n]=!0)}return t}if("object"!==typeof t)return[t].concat(n);var i=t;return Array.isArray(t)&&!Array.isArray(n)&&(i=r(t,o)),Array.isArray(t)&&Array.isArray(n)?(n.forEach((function(n,i){a.call(t,i)?t[i]&&"object"===typeof t[i]?t[i]=e(t[i],n,o):t.push(n):t[i]=n})),t):Object.keys(n).reduce((function(t,i){var r=n[i];return a.call(t,i)?t[i]=e(t[i],r,o):t[i]=r,t}),i)},l=function(e,t){return Object.keys(t).reduce((function(e,n){return e[n]=t[n],e}),e)},c=function(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(t){return e}},d=function(e){if(0===e.length)return e;for(var t="string"===typeof e?e:String(e),n="",a=0;a<t.length;++a){var i=t.charCodeAt(a);45===i||46===i||95===i||126===i||i>=48&&i<=57||i>=65&&i<=90||i>=97&&i<=122?n+=t.charAt(a):i<128?n+=o[i]:i<2048?n+=o[192|i>>6]+o[128|63&i]:i<55296||i>=57344?n+=o[224|i>>12]+o[128|i>>6&63]+o[128|63&i]:(a+=1,i=65536+((1023&i)<<10|1023&t.charCodeAt(a)),n+=o[240|i>>18]+o[128|i>>12&63]+o[128|i>>6&63]+o[128|63&i])}return n},u=function(e){for(var t=[{obj:{o:e},prop:"o"}],n=[],a=0;a<t.length;++a)for(var o=t[a],r=o.obj[o.prop],s=Object.keys(r),l=0;l<s.length;++l){var c=s[l],d=r[c];"object"===typeof d&&null!==d&&-1===n.indexOf(d)&&(t.push({obj:r,prop:c}),n.push(d))}return i(t)},m=function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},f=function(e){return null!==e&&"undefined"!==typeof e&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))};e.exports={arrayToObject:r,assign:l,compact:u,decode:c,encode:d,isBuffer:f,isRegExp:m,merge:s}},e032:function(e,t,n){},e5ac:function(e,t,n){},e99a:function(e,t,n){"use strict";n("b96d")}}]);